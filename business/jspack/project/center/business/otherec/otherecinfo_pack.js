Ext.namespace('Js.Center.OtherEC');Js.Center.OtherEC.OtherDataURL='URL/Business/OtherEC/OtherData.ashx';Js.Center.OtherEC.OtherECURL='URL/Business/OtherEC/tlotherecinfo.ashx';Ext.namespace('Js.Center.Business.OtherEC.OtherEcAdd');Js.Center.Business.OtherEC.OtherEcAdd.func=function(){if(Js.Center.Business.OtherEC.OtherEcAdd.window==null){Js.Center.Common.IndustryStore.reload();var numfeeareaCombox=new WXTL.Widgets.CommonForm.ComboBox({xtype:"xComboBox",name:"numfeearea",hiddenName:"numfeearea",emptyText:"-=请选择=-",allowBlank:false,blankText:"请选择地区",fieldLabel:"<font color=red>结算地</font>",readOnly:true,mode:"local",displayField:"vc2branchcompany",valueField:"numbranchcompany",triggerAction:"all",store:Js.Center.Common.BranchCompanyStore});Js.Center.Common.BranchCompanyStore.reload();var numbusareaCombox=new WXTL.Widgets.CommonForm.ComboBox({xtype:"xComboBox",name:"numbusarea",hiddenName:"numbusarea",emptyText:"-=请选择=-",allowBlank:false,blankText:"请选择地区",fieldLabel:"<font color=red>商务归属地</font>",readOnly:true,mode:"local",displayField:"vc2branchcompany",valueField:"numbranchcompany",triggerAction:"all",store:Js.Center.Common.BranchCompanyStore});var InsertInfofp=new Ext.form.FormPanel({fileUpload:true,frame:true,labelWidth:80,defaults:{anchor:'100%',msgTarget:'side'},bodyBorder:false,border:false,autoScroll:true,items:[{xtype:"hidden",name:"flag",value:"Insert"},{layout:'column',items:[{columnWidth:.5,layout:'form',defaultType:"textfield",buttonAlign:"center",bodyStyle:"padding:10px 0 10px 15px",bodyBorder:false,border:false,defaults:{anchor:"90%",msgTarget:"side"},items:[{xtype:"textfield",name:"vc2ecid",id:"Js.Center.Business.OtherEC.OtherEcAdd.vc2ecid",fieldLabel:"<font color=red>ECID</font>",allowBlank:false,blankText:"ecid不允许为空",maxLength:10,regex:/^\w+$/,regexText:"只能输入数字和字母",listeners:{"blur":function(){var ecId=Ext.getCmp("Js.Center.Business.OtherEC.OtherEcAdd.vc2ecid").getValue();Ext.Ajax.request({url:Js.Center.OtherEC.OtherECURL,method:"POST",params:{ecId:ecId,flag:"queryOtherEcName"},success:function(form,action){var objJson=Ext.util.JSON.decode(form.responseText);var flag=objJson.success;if(true==flag){var fullname=Ext.get("Js.Center.Business.OtherEC.OtherEcAdd.vc2ecfullname");var shortname=Ext.get("Js.Center.Business.OtherEC.OtherEcAdd.vc2shortname");fullname.dom.value="";shortname.dom.value="";if("Y"==objJson.info){fullname.dom.value=objJson.fullName;shortname.dom.value=objJson.shortName;fullname.dom.readOnly=true;shortname.dom.readOnly=true}else{fullname.dom.readOnly=false;shortname.dom.readOnly=false}}},failure:function(){Ext.Msg.alert("温馨提示","系统忙，请稍候...!")}})}}},{xtype:"textfield",name:"vc2ecfullname",id:"Js.Center.Business.OtherEC.OtherEcAdd.vc2ecfullname",fieldLabel:"<font color=red>客户全称</font>",allowBlank:false,blankText:"客户全称不允许为空",maxLength:100,regex:WXTL.Common.regex.Illegal,regexText:WXTL.Common.regexText.IllegalText},{xtype:"textfield",name:"vc2shortname",id:"Js.Center.Business.OtherEC.OtherEcAdd.vc2shortname",fieldLabel:"<font color=red>客户简称</font>",allowBlank:false,blankText:"客户简称不允许为空",maxLength:25,regex:WXTL.Common.regex.Illegal,regexText:WXTL.Common.regexText.IllegalText},{xtype:"combo",name:"vc2ismas",hiddenName:"vc2ismas",fieldLabel:"<font color=red>MAS客户</font>",readOnly:true,mode:"local",allowBlank:false,displayField:"show",valueField:"value",triggerAction:"all",emptyText:"-=请选择=-",store:new Ext.data.SimpleStore({fields:["show","value"],data:[["-=请选择=-",""],["是","是"],["否","否"]]})},{xtype:"combo",name:"vc2industry",hiddenName:"vc2industry",emptyText:"-=请选择=-",allowBlank:false,blankText:"请选择行业",fieldLabel:"<font color=red>行业</font>",readOnly:true,mode:"local",displayField:"vc2industry",valueField:"vc2industry",triggerAction:"all",store:Js.Center.Common.IndustryStore},{xtype:"combo",name:"vc2custype",hiddenName:"vc2custype",fieldLabel:"<font color=red>客户类型</font>",readOnly:true,mode:"local",allowBlank:false,displayField:"show",valueField:"value",triggerAction:"all",emptyText:"-=请选择=-",store:new Ext.data.SimpleStore({fields:["show","value"],data:[["-=请选择=-",""],["渠道","渠道"],["直客","直客"],["内部","内部"]]})},{xtype:"combo",name:"vc2gwtype",hiddenName:"vc2gwtype",fieldLabel:"<font color=red>短彩类型</font>",readOnly:true,mode:"local",displayField:"show",allowBlank:false,valueField:"value",triggerAction:"all",emptyText:"-=请选择=-",store:new Ext.data.SimpleStore({fields:["show","value"],data:[["-=请选择=-",""],["短信","短信"],["彩信","彩信"]]})},{xtype:"combo",name:"vc2status",hiddenName:"vc2status",fieldLabel:"<font color=red>状态</font>",readOnly:true,mode:"local",displayField:"show",allowBlank:false,valueField:"value",triggerAction:"all",emptyText:"-=请选择=-",store:new Ext.data.SimpleStore({fields:["show","value"],data:[["-=请选择=-",""],["商用","商用"],["暂停","暂停"]]})},{xtype:"combo",name:"vc2opname",hiddenName:"vc2opname",allowBlank:false,blankText:"请选择",fieldLabel:"<font color=red>运营商</font>",readOnly:true,mode:"local",displayField:"vc2name",valueField:"vc2name",triggerAction:"all",emptyText:"-=请选择=-",store:Js.Center.Common.OperatorStore},{xtype:"textfield",name:"vc2servcode",fieldLabel:"<font color=red>服务号码</font>",allowBlank:false,maxLenth:30,blankText:"服务号码不允许为空",regex:WXTL.Common.regex.Illegal,regexText:WXTL.Common.regexText.IllegalText},{xtype:"textfield",name:"vc2manager",fieldLabel:"<font color=red>商务经理</font>",allowBlank:false,blankText:"商务经理不允许为空",maxLength:10,regex:WXTL.Common.regex.Illegal,regexText:WXTL.Common.regexText.IllegalText},{xtype:"combo",name:"numcuslevel",hiddenName:"numcuslevel",fieldLabel:"<font color=red>客户级别</font>",readOnly:true,mode:"local",displayField:"show",allowBlank:false,valueField:"value",triggerAction:"all",emptyText:"-=请选择=-",store:new Ext.data.SimpleStore({fields:["show","value"],data:[["-=请选择=-",""],["1","1"],["2","2"],["3","3"]]})},{xtype:"combo",name:"vc2feemode",hiddenName:"vc2feemode",fieldLabel:"<font color=red>计费类型</font>",readOnly:true,mode:"local",displayField:"show",allowBlank:false,valueField:"value",triggerAction:"all",emptyText:"-=请选择=-",store:new Ext.data.SimpleStore({fields:["show","value"],data:[["-=请选择=-",""],["预付费","预付费"],["后付费","后付费"]]})}]},{columnWidth:.5,layout:'form',defaultType:"textfield",buttonAlign:"center",bodyBorder:false,border:false,bodyStyle:"padding:10px 0 10px 15px",defaults:{anchor:"90%",msgTarget:"side"},items:[{xtype:"textfield",name:"vc2signname",fieldLabel:"<font color=red>签约主体</font>",allowBlank:false,blankText:"签约主体不允许为空",maxLength:15,regex:WXTL.Common.regex.Illegal,regexText:WXTL.Common.regexText.IllegalText},{xtype:"textfield",name:"numlimit",fieldLabel:"<font color=red>条数限制</font>",allowBlank:false,blankText:"条数限制不允许为空",regex:WXTL.Common.regex.Integer,regexText:"只能输入数字",maxLength:9,maxLengthText:'长度不能超过9'},numfeeareaCombox,numbusareaCombox,{xtype:"textfield",name:"vc2svc",fieldLabel:"业务代码",allowBlank:true,blankText:"业务代码不允许为空",maxLength:20,regex:WXTL.Common.regex.Illegal,regexText:WXTL.Common.regexText.IllegalText},{xtype:"combo",name:"vc2feetype",hiddenName:"vc2feetype",fieldLabel:"结算类型",readOnly:true,mode:"local",allowBlank:true,displayField:"show",valueField:"value",triggerAction:"all",emptyText:"-=请选择=-",store:new Ext.data.SimpleStore({fields:["show","value"],data:[["-=请选择=-",""],["按条","按条"],["按套餐","按套餐"]]})},{xtype:"textfield",name:"vc2feerule",fieldLabel:"计费规则",allowBlank:true,blankText:"计费规则不允许为空",maxLength:300,regex:WXTL.Common.regex.Illegal,regexText:WXTL.Common.regexText.IllegalText},{xtype:"datefield",name:"vc2putintime",fieldLabel:"接入时间",allowBlank:true,labelWidth:100,format:'Y-m-d',bodyStyle:'padding:5px 5px 0',readOnly:false},{xtype:"textfield",name:"vc2gwputin",fieldLabel:"接入网关",allowBlank:true,blankText:"接入网关不允许为空",maxLength:15,regex:WXTL.Common.regex.Illegal,regexText:WXTL.Common.regexText.IllegalText},{xtype:"textfield",name:"vc2gwfeerule",fieldLabel:"网关计费规则",allowBlank:true,blankText:"网关计费规则不允许为空",maxLength:300,regex:WXTL.Common.regex.Illegal,regexText:WXTL.Common.regexText.IllegalText},{xtype:"textfield",name:"vc2subcode",fieldLabel:"服务子号",allowBlank:true,blankText:"服务子号不允许为空",maxLength:20,regex:WXTL.Common.regex.Illegal,regexText:WXTL.Common.regexText.IllegalText},{xtype:"textfield",name:"vc2conperson",fieldLabel:"联系人",allowBlank:true,blankText:"联系人不允许为空",maxLength:15,regex:WXTL.Common.regex.Illegal,regexText:WXTL.Common.regexText.IllegalText},{xtype:"textfield",name:"vc2contact",fieldLabel:"联系方式",allowBlank:true,blankText:"联系方式不允许为空",maxLength:50,regex:WXTL.Common.regex.Illegal,regexText:WXTL.Common.regexText.IllegalText}]}]}]});var mainForm=InsertInfofp.getForm();this.window=new WXTL.Widgets.CommonWindows.Window({title:"增加其他平台客户",mainForm:mainForm,updateURL:Js.Center.OtherEC.OtherECURL,displayStore:Js.Center.Business.OtherEC.ECInfostore,items:[InsertInfofp]})}};Ext.namespace('Js.Center.Business.OtherEC.OtherEcDelete');Js.Center.Business.OtherEC.OtherEcDelete.func=function(row){var deleteSplit="";for(var i=0;i<row.length;i++){if(row.length==1){deleteSplit=row[i].data.numseqid}else{if(i<(row.length-1)){deleteSplit=row[i].data.numseqid+","+deleteSplit}if(i==(row.length-1)){deleteSplit=deleteSplit+row[i].data.numseqid}}};var params={ids:deleteSplit,flag:"Delete"};doAjax(Js.Center.OtherEC.OtherECURL,params,Js.Center.Business.OtherEC.ECInfostore)};Ext.namespace('Js.Center.Business.OtherEC.OtherEcInfoDetail');Js.Center.Business.OtherEC.OtherEcInfoDetail.func=function(row){if(Js.Center.Business.OtherEC.OtherEcInfoDetail.window==null){var IndustryCombox=new WXTL.Widgets.CommonForm.ComboBox({xtype:"xComboBox",name:"vc2industry",hiddenName:"vc2industry",emptyText:"-=请选择=-",allowBlank:false,blankText:"请选择行业",fieldLabel:"<font color=red>行业</font>",readOnly:true,disabled:true,mode:"local",displayField:"vc2industry",valueField:"vc2industry",triggerAction:"all",store:Js.Center.Common.IndustryStore});var numfeeareaCombox=new WXTL.Widgets.CommonForm.ComboBox({xtype:"xComboBox",name:"numfeearea",hiddenName:"numfeearea",emptyText:"-=请选择=-",allowBlank:false,blankText:"请选择地区",fieldLabel:"<font color=red>结算地</font>",readOnly:true,disabled:true,mode:"local",displayField:"vc2branchcompany",valueField:"numbranchcompany",triggerAction:"all",store:Js.Center.Common.BranchCompanyStore});var numbusareaCombox=new WXTL.Widgets.CommonForm.ComboBox({xtype:"xComboBox",name:"numbusarea",hiddenName:"numbusarea",emptyText:"-=请选择=-",allowBlank:false,blankText:"请选择地区",fieldLabel:"<font color=red>商务归属地</font>",readOnly:true,disabled:true,mode:"local",displayField:"vc2branchcompany",valueField:"numbranchcompany",triggerAction:"all",store:Js.Center.Common.BranchCompanyStore});var DetailInfofp=new Ext.form.FormPanel({fileUpload:true,frame:true,labelWidth:80,defaults:{anchor:'100%',msgTarget:'side'},bodyBorder:false,border:false,autoScroll:true,items:[{xtype:"hidden",name:"flag",value:"Insert"},{layout:'column',items:[{columnWidth:.5,layout:'form',defaultType:"textfield",buttonAlign:"center",bodyStyle:"padding:10px 0 10px 15px",bodyBorder:false,border:false,defaults:{anchor:"90%",msgTarget:"side"},items:[{xtype:"textfield",name:"vc2ecid",fieldLabel:"<font color=red>ECID</font>",allowBlank:false,blankText:"ecid不允许为空",disabled:true},{xtype:"textfield",name:"vc2ecfullname",fieldLabel:"<font color=red>客户全称</font>",allowBlank:false,disabled:true,blankText:"客户全称不允许为空"},{xtype:"textfield",name:"vc2shortname",fieldLabel:"<font color=red>客户简称</font>",allowBlank:false,disabled:true,blankText:"客户简称不允许为空"},{xtype:"combo",name:"vc2ismas",hiddenName:"vc2ismas",fieldLabel:"<font color=red>MAS客户</font>",readOnly:true,disabled:true,mode:"local",allowBlank:false,displayField:"show",valueField:"value",triggerAction:"all",emptyText:"-=请选择=-",store:new Ext.data.SimpleStore({fields:["show","value"],data:[["-=请选择=-",""],["是","是"],["否","否"]]})},IndustryCombox,{xtype:"combo",name:"vc2custype",hiddenName:"vc2custype",fieldLabel:"<font color=red>客户类型</font>",readOnly:true,disabled:true,mode:"local",allowBlank:false,displayField:"show",valueField:"value",triggerAction:"all",emptyText:"-=请选择=-",store:new Ext.data.SimpleStore({fields:["show","value"],data:[["-=请选择=-",""],["渠道","渠道"],["直客","直客"],["内部","内部"]]})},{xtype:"combo",name:"vc2gwtype",hiddenName:"vc2gwtype",fieldLabel:"<font color=red>短彩类型</font>",readOnly:true,disabled:true,mode:"local",displayField:"show",allowBlank:false,valueField:"value",triggerAction:"all",emptyText:"-=请选择=-",store:new Ext.data.SimpleStore({fields:["show","value"],data:[["-=请选择=-",""],["短信","短信"],["彩信","彩信"]]})},{xtype:"combo",name:"vc2status",hiddenName:"vc2status",fieldLabel:"<font color=red>状态</font>",readOnly:true,disabled:true,mode:"local",displayField:"show",allowBlank:false,valueField:"value",triggerAction:"all",emptyText:"-=请选择=-",store:new Ext.data.SimpleStore({fields:["show","value"],data:[["-=请选择=-",""],["商用","商用"],["暂停","暂停"]]})},{xtype:"combo",name:"vc2opname",hiddenName:"vc2opname",emptyText:"-=请选择=-",allowBlank:true,disabled:true,blankText:"请选择",fieldLabel:"<font color=red>运营商</font>",readOnly:true,mode:"local",displayField:"vc2name",valueField:"vc2name",triggerAction:"all",store:Js.Center.Common.OperatorStore},{xtype:"textfield",name:"vc2servcode",fieldLabel:"<font color=red>服务号码</font>",allowBlank:false,disabled:true,maxLenth:20,blankText:"服务号码不允许为空"},{xtype:"textfield",name:"vc2manager",fieldLabel:"<font color=red>商务经理</font>",allowBlank:false,disabled:true,blankText:"商务经理不允许为空"},{xtype:"combo",name:"numcuslevel",hiddenName:"numcuslevel",fieldLabel:"<font color=red>客户级别</font>",readOnly:true,disabled:true,mode:"local",displayField:"show",allowBlank:false,valueField:"value",triggerAction:"all",emptyText:"-=请选择=-",store:new Ext.data.SimpleStore({fields:["show","value"],data:[["-=请选择=-",""],["1","1"],["2","2"],["3","3"]]})},{xtype:"combo",name:"vc2feemode",hiddenName:"vc2feemode",fieldLabel:"<font color=red>计费类型</font>",readOnly:true,disabled:true,mode:"local",displayField:"show",allowBlank:false,valueField:"value",triggerAction:"all",emptyText:"-=请选择=-",store:new Ext.data.SimpleStore({fields:["show","value"],data:[["-=请选择=-",""],["预付费","预付费"],["后付费","后付费"]]})}]},{columnWidth:.5,layout:'form',defaultType:"textfield",buttonAlign:"center",bodyBorder:false,border:false,bodyStyle:"padding:10px 0 10px 15px",defaults:{anchor:"90%",msgTarget:"side"},items:[{xtype:"textfield",name:"vc2signname",fieldLabel:"<font color=red>签约主体</font>",allowBlank:false,disabled:true,blankText:"签约主体不允许为空"},{xtype:"textfield",name:"numlimit",fieldLabel:"<font color=red>条数限制</font>",allowBlank:false,disabled:true,blankText:"条数限制不允许为空"},numfeeareaCombox,numbusareaCombox,{xtype:"textfield",name:"vc2svc",fieldLabel:"业务代码",allowBlank:true,disabled:true,blankText:"业务代码不允许为空"},{xtype:"combo",name:"vc2feetype",hiddenName:"vc2feetype",fieldLabel:"结算类型",readOnly:true,disabled:true,mode:"local",allowBlank:true,displayField:"show",valueField:"value",triggerAction:"all",emptyText:"-=请选择=-",store:new Ext.data.SimpleStore({fields:["show","value"],data:[["-=请选择=-",""],["按条","按条"],["按套餐","按套餐"]]})},{xtype:"textfield",name:"vc2feerule",fieldLabel:"计费规则",allowBlank:true,disabled:true,blankText:"计费规则不允许为空"},{xtype:"textfield",name:"vc2putintime",fieldLabel:"接入时间",allowBlank:true,disabled:true,blankText:"接入时间不允许为空"},{xtype:"textfield",name:"vc2gwputin",fieldLabel:"接入网关",allowBlank:true,disabled:true,blankText:"接入网关不允许为空"},{xtype:"textfield",name:"vc2gwfeerule",fieldLabel:"网关计费规则",allowBlank:true,disabled:true,blankText:"网关计费规则不允许为空"},{xtype:"textfield",name:"vc2subcode",fieldLabel:"服务子号",allowBlank:true,disabled:true,blankText:"服务子号不允许为空"},{xtype:"textfield",name:"vc2conperson",fieldLabel:"联系人",allowBlank:true,disabled:true,blankText:"联系人不允许为空"},{xtype:"textfield",name:"vc2contact",fieldLabel:"联系方式",allowBlank:true,disabled:true,blankText:"联系方式不允许为空"}]}]}]});var mainForm=DetailInfofp.getForm();this.window=new WXTL.Widgets.CommonWindows.Window({title:"其他平台客户详细信息",mainForm:mainForm,updateURL:Js.Center.OtherEC.OtherECURL,displayStore:Js.Center.Business.OtherEC.ECInfostore,items:[DetailInfofp],needButtons:false,buttons:[{text:"关  闭",minWidth:70,handler:function(){Js.Center.Business.OtherEC.OtherEcInfoDetail.window.hide()}}]})}};Ext.namespace('Js.Center.Business.OtherEC.OtherMana');Js.Center.Business.OtherEC.OtherMana.tlotherecinfoinfo=function(node){if(Ext.get("Js.Center.Business.OtherEC.OtherMana.MainPanel")==null){var _pageSize=12;var fields=["numseqid","vc2ecid","vc2ecfullname","vc2shortname","vc2ismas","vc2industry","vc2custype","vc2gwtype","vc2status","vc2opname","vc2servcode","vc2manager","numcuslevel","vc2feemode","vc2subcode","vc2conperson","vc2contact","numlimit","numfeearea","numbusarea","vc2svc","vc2feetype","vc2feerule","vc2putintime","vc2gwputin","vc2gwfeerule","vc2validflag","vc2signname","vc2branchcompany"];Js.Center.Business.OtherEC.ECInfostore=new WXTL.Widgets.CommonData.GroupingStore({proxy:new Ext.data.HttpProxy({url:Js.Center.OtherEC.OtherECURL,method:"POST"}),reader:new Ext.data.JsonReader({fields:fields,root:"data",id:"numrowasdf",totalProperty:"totalCount"}),baseParams:{vc2gwtype:'',vc2opname:'',vc2ecname:'',vc2servcode:'',optype:'query',flag:'queryOtherEcList'},sortInfo:{field:'numseqid',direction:'DESC'}});Js.Center.Business.OtherEC.ECInfostore.load({params:{start:0,limit:_pageSize}});var sm=new Ext.grid.CheckboxSelectionModel({dataIndex:"numrowasdf"});var cm=new Ext.grid.ColumnModel([{dataIndex:"numseqid",hidden:true},{header:"ECID",tooltip:"ECID",dataIndex:"vc2ecid",sortable:true,editor:new Ext.form.TextField},{header:"短彩类型",tooltip:"短彩类型",dataIndex:"vc2gwtype",sortable:true,editor:new Ext.form.TextField},{header:"运营商",tooltip:"运营商",dataIndex:"vc2opname",sortable:true,editor:new Ext.form.TextField},{header:"服务代码",tooltip:"服务代码",dataIndex:"vc2servcode",sortable:true,editor:new Ext.form.TextField},{header:"EC简称",tooltip:"EC简称",dataIndex:"vc2shortname",sortable:true,editor:new Ext.form.TextField},{header:"归属地区",tooltip:"归属地区",dataIndex:"vc2branchcompany",sortable:true,editor:new Ext.form.TextField},{header:"详细",tooltip:"",dataIndex:"numseqid",sortable:true,renderer:function(value,meta,record,rowIndex,colIndex,store){return"<a href='#' onclick='Js.Center.Business.OtherEC.OtherEcInfoDetailShow (\""+record+"\")'>详细</a>"}}]);var vc2gwtypeCombox=new WXTL.Widgets.CommonForm.ComboBox({xtype:"xComboBox",name:"vc2gwtype",hiddenName:"vc2gwtype",fieldLabel:"短彩类型",readOnly:true,mode:"local",displayField:"show",allowBlank:true,valueField:"value",triggerAction:"all",emptyText:"-=请选择=-",store:new Ext.data.SimpleStore({fields:["show","value"],data:[["-=请选择=-",""],["短信","短信"],["彩信","彩信"]]})});var opidCombox=new WXTL.Widgets.CommonForm.ComboBox({xtype:"xComboBox",name:"numopid",hiddenName:"numopid",emptyText:"-=请选择=-",allowBlank:true,blankText:"请选择",fieldLabel:"运营商",readOnly:true,mode:"local",displayField:"vc2name",valueField:"numopid",triggerAction:"all",store:Js.Center.Common.OperatorStore});Js.Center.Common.OperatorStore.reload();var OtherEcInfoSelectPanel=new WXTL.Widgets.CommonPanel.QueryFormPanel({height:160,queryMethod:"Js.Center.Business.OtherEC.OtherMana.queryMainGrid",items:[{layout:'column',items:[{columnWidth:.5,layout:'form',defaultType:"textfield",defaults:{anchor:"90%",msgTarget:"side"},buttonAlign:"center",bodyStyle:"padding:10px 0 10px 15px",items:[vc2gwtypeCombox,{xtype:"textfield",fieldLabel:"服务代码",name:"vc2servcode",id:"Js.Center.Business.OtherEC.OtherMana.vc2servcode",maxLength:20,regex:WXTL.Common.regex.Illegal,regexText:WXTL.Common.regexText.IllegalText}]},{columnWidth:.5,layout:'form',defaultType:"textfield",defaults:{anchor:"90%",msgTarget:"side"},buttonAlign:"center",bodyStyle:"padding:10px 0 10px 15px",items:[opidCombox,{xtype:"textfield",fieldLabel:"EC简称",name:"customername",id:"Js.Center.Business.OtherEC.OtherMana.customername",maxLength:20,regex:WXTL.Common.regex.Illegal,regexText:WXTL.Common.regexText.IllegalText}]}]}]});Js.Center.Business.OtherEC.OtherMana.queryMainGrid=function(){if(OtherEcInfoSelectPanel.getForm().isValid()){var _vc2gwtype=vc2gwtypeCombox.getValue();var _vc2opname=opidCombox.getRawValue();var _vc2ecname=Ext.get("Js.Center.Business.OtherEC.OtherMana.customername").getValue();var _vc2servcode=Ext.get("Js.Center.Business.OtherEC.OtherMana.vc2servcode").getValue();var flag='queryOtherEcList';var optype='query';Js.Center.Business.OtherEC.ECInfostore.baseParams={vc2gwtype:_vc2gwtype,vc2opname:_vc2opname,vc2ecname:_vc2ecname,vc2servcode:_vc2servcode,flag:flag,optype:optype};Js.Center.Business.OtherEC.ECInfostore.load({params:{start:0,limit:_pageSize}})}};var otherec_arrInitLoadFunc=new Array();otherec_arrInitLoadFunc[0]="Js.Center.Business.OtherEC.OtherEcAdd.func";otherec_arrInitLoadFunc[1]="Js.Center.Business.OtherEC.OtherEcUpdate.func";otherec_arrInitLoadFunc[2]="Js.Center.Business.OtherEC.OtherEcInfoDetail.func";var OtherECQueryInfoGrid=new WXTL.Widgets.CommonGrid.GridPanel({anchor:'100% 100%',pageSize:_pageSize,needMenu:false,store:Js.Center.Business.OtherEC.ECInfostore,sm:sm,cm:cm,needRightMenu:false,afterEditURL:Js.Center.OtherEC.OtherECURL,inertMethod:'Js.Center.Business.OtherEC.OtherEcAdd',updateMethod:'Js.Center.Business.OtherEC.OtherEcUpdate',deleteMethod:'Js.Center.Business.OtherEC.OtherEcDelete',otherInitLoadFunc:otherec_arrInitLoadFunc,tbar:new Ext.Toolbar({items:[{iconCls:'addicon',text:"增加",handler:function(){OtherECQueryInfoGrid.doInsert()}},"","-","",{iconCls:'editicon',text:"修改",handler:function(){OtherECQueryInfoGrid.doEdit()}},"","-","",{iconCls:'deleteicon',text:"删除",handler:function(){var row=OtherECQueryInfoGrid.getSelectionModel().getSelections();if(row.length==0){Ext.Msg.alert("温馨提示","请您选择记录!")}else{Ext.Msg.confirm("温馨提示!","您确认要删除吗？",function(btn){if(btn=="yes"){Js.Center.Business.OtherEC.OtherEcDelete.func(row)}})}}},"","-","",{iconCls:'editicon',text:"导出",handler:function(){var params=Js.Center.OtherEC.OtherECURL+"?";params+="start=0&limit=-1&optype=export&flag=queryOtherEcList";params+="&vc2gwtype="+encodeURI(vc2gwtypeCombox.getValue());params+="&vc2opname="+encodeURI(opidCombox.getRawValue());params+="&vc2ecname="+encodeURI(Ext.get("Js.Center.Business.OtherEC.OtherMana.customername").getValue());params+="&vc2servcode="+encodeURI(Ext.get("Js.Center.Business.OtherEC.OtherMana.vc2servcode").getValue());windowOpen(params)}}]})});Js.Center.Business.OtherEC.OtherMana.MainPanel=new Ext.Panel({frame:true,id:"Js.Center.Business.OtherEC.OtherMana.MainPanel",bodyBorder:false,border:false,autoScroll:true,layout:"anchor",defaults:{collapsible:true},items:[OtherEcInfoSelectPanel,OtherECQueryInfoGrid]})};GridMain(node,Js.Center.Business.OtherEC.OtherMana.MainPanel,"openroomiconinfo","Js.Center.Business.OtherEC.ECInfostore");Js.Center.Business.OtherEC.OtherEcInfoDetailShow=function(rowValue){var row=OtherECQueryInfoGrid.getSelectionModel().getSelections();Js.Center.Business.OtherEC.OtherEcInfoDetail.window.updateRecord=row[0];Js.Center.Business.OtherEC.OtherEcInfoDetail.window.mainForm.loadRecord(row[0]);Js.Center.Business.OtherEC.OtherEcInfoDetail.window.show()}};Ext.namespace('Js.Center.Business.OtherEC.OtherEcUpdate');Js.Center.Business.OtherEC.OtherEcUpdate.func=function(row){if(Js.Center.Business.OtherEC.OtherEcUpdate.window==null){Js.Center.Common.IndustryStore.reload();var numfeeareaCombox=new WXTL.Widgets.CommonForm.ComboBox({xtype:"xComboBox",name:"numfeearea",hiddenName:"numfeearea",emptyText:"-=请选择=-",allowBlank:false,blankText:"请选择地区",fieldLabel:"<font color=red>结算地</font>",readOnly:true,mode:"local",displayField:"vc2branchcompany",valueField:"numbranchcompany",triggerAction:"all",store:Js.Center.Common.BranchCompanyStore});Js.Center.Common.BranchCompanyStore.reload();var numbusareaCombox=new WXTL.Widgets.CommonForm.ComboBox({xtype:"xComboBox",name:"numbusarea",hiddenName:"numbusarea",emptyText:"-=请选择=-",allowBlank:false,blankText:"请选择地区",fieldLabel:"<font color=red>商务归属地</font>",readOnly:true,mode:"local",displayField:"vc2branchcompany",valueField:"numbranchcompany",triggerAction:"all",store:Js.Center.Common.BranchCompanyStore});var UpdateInfofp=new Ext.form.FormPanel({fileUpload:true,frame:true,labelWidth:80,defaults:{anchor:'100%',msgTarget:'side'},bodyBorder:false,border:false,autoScroll:true,items:[{xtype:"hidden",name:"flag",value:"Update"},{xtype:"hidden",name:"numseqid",fieldLabel:"序列"},{layout:'column',items:[{columnWidth:.5,layout:'form',defaultType:"textfield",buttonAlign:"center",bodyStyle:"padding:10px 0 10px 15px",bodyBorder:false,border:false,defaults:{anchor:"90%",msgTarget:"side"},items:[{xtype:"textfield",name:"vc2ecid",id:"Js.Center.Business.OtherEC.OtherEcUpdate.vc2ecid",fieldLabel:"<font color=red>ECID</font>",allowBlank:false,blankText:"ecid不允许为空",maxLength:10,regex:/^\w+$/,regexText:"只能输入数字和字母",listeners:{"blur":function(){var ecId=Ext.getCmp("Js.Center.Business.OtherEC.OtherEcUpdate.vc2ecid").getValue();Ext.Ajax.request({url:Js.Center.OtherEC.OtherECURL,method:"POST",params:{ecId:ecId,flag:"queryOtherEcName"},success:function(form,action){var objJson=Ext.util.JSON.decode(form.responseText);var flag=objJson.success;if(true==flag){var fullname=Ext.get("Js.Center.Business.OtherEC.OtherEcUpdate.vc2ecfullname");var shortname=Ext.get("Js.Center.Business.OtherEC.OtherEcUpdate.vc2shortname");fullname.dom.value="";shortname.dom.value="";if("Y"==objJson.info){fullname.dom.value=objJson.fullName;shortname.dom.value=objJson.shortName}}},failure:function(){Ext.Msg.alert("温馨提示","系统忙，请稍候...!")}})}}},{xtype:"textfield",name:"vc2ecfullname",id:"Js.Center.Business.OtherEC.OtherEcUpdate.vc2ecfullname",fieldLabel:"<font color=red>客户全称</font>",allowBlank:false,blankText:"客户全称不允许为空",maxLength:100,regex:WXTL.Common.regex.Illegal,regexText:WXTL.Common.regexText},{xtype:"textfield",name:"vc2shortname",id:"Js.Center.Business.OtherEC.OtherEcUpdate.vc2shortname",fieldLabel:"<font color=red>客户简称</font>",allowBlank:false,blankText:"客户简称不允许为空",maxLength:25,regex:WXTL.Common.regex.Illegal,regexText:WXTL.Common.regexText.IllegalText},{xtype:"combo",name:"vc2ismas",hiddenName:"vc2ismas",fieldLabel:"<font color=red>MAS客户</font>",readOnly:true,mode:"local",allowBlank:false,displayField:"show",valueField:"value",triggerAction:"all",emptyText:"-=请选择=-",store:new Ext.data.SimpleStore({fields:["show","value"],data:[["-=请选择=-",""],["是","是"],["否","否"]]})},{xtype:"combo",name:"vc2industry",hiddenName:"vc2industry",emptyText:"-=请选择=-",allowBlank:false,blankText:"请选择行业",fieldLabel:"<font color=red>行业</font>",readOnly:true,mode:"local",displayField:"vc2industry",valueField:"vc2industry",triggerAction:"all",store:Js.Center.Common.IndustryStore},{xtype:"combo",name:"vc2custype",hiddenName:"vc2custype",fieldLabel:"<font color=red>客户类型</font>",readOnly:true,mode:"local",allowBlank:false,displayField:"show",valueField:"value",triggerAction:"all",emptyText:"-=请选择=-",store:new Ext.data.SimpleStore({fields:["show","value"],data:[["-=请选择=-",""],["渠道","渠道"],["直客","直客"],["内部","内部"]]})},{xtype:"combo",name:"vc2gwtype",hiddenName:"vc2gwtype",fieldLabel:"<font color=red>短彩类型</font>",readOnly:true,mode:"local",displayField:"show",allowBlank:false,valueField:"value",triggerAction:"all",emptyText:"-=请选择=-",store:new Ext.data.SimpleStore({fields:["show","value"],data:[["-=请选择=-",""],["短信","短信"],["彩信","彩信"]]})},{xtype:"combo",name:"vc2status",hiddenName:"vc2status",fieldLabel:"<font color=red>状态</font>",readOnly:true,mode:"local",displayField:"show",allowBlank:false,valueField:"value",triggerAction:"all",emptyText:"-=请选择=-",store:new Ext.data.SimpleStore({fields:["show","value"],data:[["-=请选择=-",""],["商用","商用"],["暂停","暂停"]]})},{xtype:"combo",name:"vc2opname",hiddenName:"vc2opname",allowBlank:false,blankText:"请选择",fieldLabel:"<font color=red>运营商</font>",readOnly:true,mode:"local",displayField:"vc2name",valueField:"vc2name",triggerAction:"all",emptyText:"-=请选择=-",store:Js.Center.Common.OperatorStore},{xtype:"textfield",name:"vc2servcode",fieldLabel:"<font color=red>服务号码</font>",allowBlank:false,maxLenth:30,blankText:"服务号码不允许为空",regex:WXTL.Common.regex.Illegal,regexText:WXTL.Common.regexText.IllegalText},{xtype:"textfield",name:"vc2manager",fieldLabel:"<font color=red>商务经理</font>",allowBlank:false,blankText:"商务经理不允许为空",maxLength:10,regex:WXTL.Common.regex.Illegal,regexText:WXTL.Common.regexText.IllegalText},{xtype:"combo",name:"numcuslevel",hiddenName:"numcuslevel",fieldLabel:"<font color=red>客户级别</font>",readOnly:true,mode:"local",displayField:"show",allowBlank:false,valueField:"value",triggerAction:"all",emptyText:"-=请选择=-",store:new Ext.data.SimpleStore({fields:["show","value"],data:[["-=请选择=-",""],["1","1"],["2","2"],["3","3"]]})},{xtype:"combo",name:"vc2feemode",hiddenName:"vc2feemode",fieldLabel:"<font color=red>计费类型</font>",readOnly:true,mode:"local",displayField:"show",allowBlank:false,valueField:"value",triggerAction:"all",emptyText:"-=请选择=-",store:new Ext.data.SimpleStore({fields:["show","value"],data:[["-=请选择=-",""],["预付费","预付费"],["后付费","后付费"]]})}]},{columnWidth:.5,layout:'form',defaultType:"textfield",buttonAlign:"center",bodyBorder:false,border:false,bodyStyle:"padding:10px 0 10px 15px",defaults:{anchor:"90%",msgTarget:"side"},items:[{xtype:"textfield",name:"vc2signname",fieldLabel:"<font color=red>签约主体</font>",allowBlank:false,blankText:"签约主体不允许为空",maxLength:15,regex:WXTL.Common.regex.Illegal,regexText:WXTL.Common.regexText.IllegalText},{xtype:"textfield",name:"numlimit",fieldLabel:"<font color=red>条数限制</font>",allowBlank:false,blankText:"条数限制不允许为空",regex:WXTL.Common.regex.Integer,regexText:"只能输入数字",maxLength:9,maxLengthText:'长度不能超过9'},numfeeareaCombox,numbusareaCombox,{xtype:"textfield",name:"vc2svc",fieldLabel:"业务代码",allowBlank:true,blankText:"业务代码不允许为空",maxLength:20,regex:WXTL.Common.regex.Illegal,regexText:WXTL.Common.regexText.IllegalText},{xtype:"combo",name:"vc2feetype",hiddenName:"vc2feetype",fieldLabel:"结算类型",readOnly:true,mode:"local",allowBlank:true,displayField:"show",valueField:"value",triggerAction:"all",emptyText:"-=请选择=-",store:new Ext.data.SimpleStore({fields:["show","value"],data:[["-=请选择=-",""],["按条","按条"],["按套餐","按套餐"]]})},{xtype:"textfield",name:"vc2feerule",fieldLabel:"计费规则",allowBlank:true,blankText:"计费规则不允许为空",maxLength:300,regex:WXTL.Common.regex.Illegal,regexText:WXTL.Common.regexText.IllegalText},{xtype:"datefield",name:"vc2putintime",fieldLabel:"接入时间",allowBlank:true,labelWidth:100,format:'Y-m-d',bodyStyle:'padding:5px 5px 0',readOnly:false},{xtype:"textfield",name:"vc2gwputin",fieldLabel:"接入网关",allowBlank:true,blankText:"接入网关不允许为空",maxLength:15,regex:WXTL.Common.regex.Illegal,regexText:WXTL.Common.regexText.IllegalText},{xtype:"textfield",name:"vc2gwfeerule",fieldLabel:"网关计费规则",allowBlank:true,blankText:"网关计费规则不允许为空",maxLength:300,regex:WXTL.Common.regex.Illegal,regexText:WXTL.Common.regexText.IllegalText},{xtype:"textfield",name:"vc2subcode",fieldLabel:"服务子号",allowBlank:true,blankText:"服务子号不允许为空",maxLength:20,regex:WXTL.Common.regex.Illegal,regexText:WXTL.Common.regexText.IllegalText},{xtype:"textfield",name:"vc2conperson",fieldLabel:"联系人",allowBlank:true,blankText:"联系人不允许为空",maxLength:15,regex:WXTL.Common.regex.Illegal,regexText:WXTL.Common.regexText.IllegalText},{xtype:"textfield",name:"vc2contact",fieldLabel:"联系方式",allowBlank:true,blankText:"联系方式不允许为空",maxLength:50,regex:WXTL.Common.regex.Illegal,regexText:WXTL.Common.regexText.IllegalText}]}]}]});var mainForm=UpdateInfofp.getForm();this.window=new WXTL.Widgets.CommonWindows.Window({title:"修改其他平台客户信息",mainForm:mainForm,updateURL:Js.Center.OtherEC.OtherECURL,displayStore:Js.Center.Business.OtherEC.ECInfostore,items:[UpdateInfofp]})}};