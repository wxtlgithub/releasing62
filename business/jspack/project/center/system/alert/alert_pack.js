Ext.namespace('Js.Center.Alert');Js.Center.Alert.AlertMonitorQueryURL='cmd.ashx';Js.Center.Alert.AlertQueryURL='URL/Alert/AlertQueryYxt.ashx';Js.Center.Alert.AlertUpdateURL='URL/Alert/AlertUpdate.ashx';Ext.namespace('Js.Center.Alert.AlertInfo');Js.Center.Alert.AlertInfo.Info=function(node){if(Ext.get("Js.Center.Alert.AlertInfo.MainPanel")==null){var gatewayfields=["numtaskid","numgwid","vc2gatewayname","module_status","connection_status","response_count","submit_speed","numstate","queue_count","numstatus"];Js.Center.Alert.AlertInfo.gatewayInfostore=new WXTL.Widgets.CommonData.GroupingStore({proxy:new Ext.data.HttpProxy({url:Js.Center.Alert.AlertQueryURL,method:"POST"}),reader:new Ext.data.JsonReader({fields:gatewayfields,root:"data",id:"numgwid",totalProperty:"totalCount"}),sortInfo:{field:'numtaskid',direction:'asc'},baseParams:{flag:'selectgatewaymonitorinfo'}});var gwsm=new Ext.grid.CheckboxSelectionModel({dataIndex:"numgwid"});var gwcm=new Ext.grid.ColumnModel([{header:"模块ID",tooltip:"模块ID",dataIndex:"numtaskid",sortable:true},{header:"积压数量",tooltip:"积压数量",dataIndex:"queue_count",sortable:true},{header:"网关ID",tooltip:"网关ID",dataIndex:"numgwid",sortable:true},{header:"网关名称",tooltip:"网关名称",dataIndex:"vc2gatewayname",sortable:true,renderer:function(value,meta,record,rowIndex,colIndex,store){return"<span id='Js.Center.Alert.AlertInfo.GWGrid"+record.id+"' onMouseOut='Js.Center.Alert.AlertInfo.mouseOutClose(\""+record.id+"\")'  onclick='Js.Center.Alert.AlertInfo.ModuleShow(\"Js.Center.Alert.AlertInfo.GWGrid\",\""+record.id+"\",\""+value+"\",\""+record.data.numtaskid+"\")'>"+value+"</span>"}},{header:"运行状态",tooltip:"运行状态",dataIndex:"module_status",sortable:true,renderer:function(value,meta,record,rowIndex,colIndex,store){if(record.get("numstatus")==0){return""}if(value=="INIT"){return"初始化"}else if(value=="READY"){return"就绪"}else if(value=="START"){return"运行"}else if(value=="PAUSE"){return"暂停"}else if(value=="STOP"){return"停止"}else if(value=="STOPPING"){return"停止中"}else{return""}}},{header:"连接状态",tooltip:"连接状态",dataIndex:"connection_status",sortable:true,renderer:function(value,meta,record,rowIndex,colIndex,store){if(record.get("numstatus")==0){return""}if(value=="true"){return"<font color='green'>连接</font>"}else if(value=="false"){if(record.get("numstate")==1){if(record.get("module_status")=="START"){soundManager.play('alertSound')}return"<font color='red'>断开</font>"}else{return"<font color='green'>断开</font>"}}}},{header:"今日发送总数",tooltip:"今日发送总数",dataIndex:"response_count",sortable:true,renderer:function(value,meta,record,rowIndex,colIndex,store){if(record.get("numstatus")=="0"){return""}else{return value}}},{header:"发送速度",tooltip:"发送速度",dataIndex:"submit_speed",sortable:true,renderer:function(value,meta,record,rowIndex,colIndex,store){if(record.get("numstatus")=="0"){return""}else{return value}}}]);var gatewayGrid=new Ext.grid.GridPanel({anchor:'100% 100%',bodyStyle:'width:100%',store:Js.Center.Alert.AlertInfo.gatewayInfostore,viewConfig:{autoFill:true,forceFit:true},autoHeight:true,sm:gwsm,cm:gwcm,tbar:new Ext.Toolbar({items:[{iconCls:'addicon',text:"报警设置",handler:function(){var record=Js.Center.Alert.AlertInfo.getAlertSetInfo();Js.Center.Alert.AlertGatewaySet.window.updateRecord=record;Js.Center.Alert.AlertGatewaySet.window.show();if(record.data.GatewayStateRule_mode!=null){Js.Center.Alert.AlertGatewaySet.window.items.items[0].findByType("checkboxgroup")[0].setValue(record.data.GatewayStateRule_mode.split(','))}else{Js.Center.Alert.AlertGatewaySet.window.items.items[0].findByType("checkboxgroup")[0].setValue('1')}}}]})});var respfailFields=["numtaskid","numgwid","vc2gatewayname","response_count","response_error","response_error_pct","numstate","numstatus"];Js.Center.Alert.AlertInfo.respFailInfostore=new WXTL.Widgets.CommonData.GroupingStore({proxy:new Ext.data.HttpProxy({url:Js.Center.Alert.AlertQueryURL,method:"POST"}),reader:new Ext.data.JsonReader({fields:respfailFields,root:"data",id:"numgwid",totalProperty:"totalCount"}),sortInfo:{field:'numtaskid',direction:'asc'},baseParams:{flag:'selectresponsefailmonitorinfo'}});var respsm=new Ext.grid.CheckboxSelectionModel({dataIndex:"numgwid"});var respcm=new Ext.grid.ColumnModel([{header:"模块ID",tooltip:"模块ID",dataIndex:"numtaskid",sortable:true},{header:"网关ID",tooltip:"网关ID",dataIndex:"numgwid",sortable:true},{header:"网关名称",tooltip:"网关名称",dataIndex:"vc2gatewayname",sortable:true,renderer:function(value,meta,record,rowIndex,colIndex,store){return"<span id='Js.Center.Alert.AlertInfo.RespGrid"+record.id+"' onMouseOut='Js.Center.Alert.AlertInfo.mouseOutClose(\""+record.id+"\")'  onclick='Js.Center.Alert.AlertInfo.ModuleShow(\"Js.Center.Alert.AlertInfo.RespGrid\",\""+record.id+"\",\""+value+"\",\""+record.data.numtaskid+"\")'>"+value+"</span>"}},{header:"发送总数",tooltip:"发送总数",dataIndex:"response_count",sortable:true,renderer:function(value,meta,record,rowIndex,colIndex,store){if(record.get("numstatus")==0){return""}if(record.get("numstate")==1){soundManager.play('alertSound');return"<font color='red'>"+value+"</font>"}else{return"<font color='green'>"+value+"</font>"}}},{header:"失败数",tooltip:"失败数",dataIndex:"response_error",sortable:true,renderer:function(value,meta,record,rowIndex,colIndex,store){if(record.get("numstatus")==0){return""}if(record.get("numstate")==1){return"<font color='red'>"+value+"</font>"}else{return"<font color='green'>"+value+"</font>"}}},{header:"失败率",tooltip:"失败率",dataIndex:"response_error_pct",sortable:true,renderer:function(value,meta,record,rowIndex,colIndex,store){if(record.get("numstatus")==0){return""}if(record.get("numstate")==1){return"<font color='red'>"+value+"</font>"}else{return"<font color='green'>"+value+"</font>"}}}]);var respfailGrid=new Ext.grid.GridPanel({anchor:'100% 100%',bodyStyle:'width:100%',store:Js.Center.Alert.AlertInfo.respFailInfostore,viewConfig:{autoFill:true,forceFit:true},autoHeight:true,sm:respsm,cm:respcm,tbar:new Ext.Toolbar({items:[{iconCls:'addicon',text:"报警设置",handler:function(){var record=Js.Center.Alert.AlertInfo.getAlertSetInfo();Js.Center.Alert.AlertResponseSet.window.updateRecord=record;Js.Center.Alert.AlertResponseSet.window.show();if(record.data.ResponseRule_mode!=null){Js.Center.Alert.AlertResponseSet.window.items.items[0].findByType("checkboxgroup")[0].setValue(record.data.ResponseRule_mode.split(','))}else{Js.Center.Alert.AlertResponseSet.window.items.items[0].findByType("checkboxgroup")[0].setValue('1')}}}]})});var reportfailFields=["numtaskid","numgwid","vc2gatewayname","rpt_count","rpt_fail_count","rpt_error_pct","numstate","numstatus"];Js.Center.Alert.AlertInfo.reportfailInfostore=new WXTL.Widgets.CommonData.GroupingStore({proxy:new Ext.data.HttpProxy({url:Js.Center.Alert.AlertQueryURL,method:"POST"}),reader:new Ext.data.JsonReader({fields:reportfailFields,root:"data",id:"numgwid",totalProperty:"totalCount"}),sortInfo:{field:'numtaskid',direction:'asc'},baseParams:{flag:'selectreportfailmonitorinfo'}});var reportsm=new Ext.grid.CheckboxSelectionModel({dataIndex:"numgwid"});var reportcm=new Ext.grid.ColumnModel([{header:"模块ID",tooltip:"模块ID",dataIndex:"numtaskid",sortable:true},{header:"网关ID",tooltip:"网关ID",dataIndex:"numgwid",sortable:true},{header:"网关名称",tooltip:"网关名称",dataIndex:"vc2gatewayname",sortable:true,renderer:function(value,meta,record,rowIndex,colIndex,store){return"<span id='Js.Center.Alert.AlertInfo.RepGrid"+record.id+"' onMouseOut='Js.Center.Alert.AlertInfo.mouseOutClose(\""+record.id+"\")'  onclick='Js.Center.Alert.AlertInfo.ModuleShow(\"Js.Center.Alert.AlertInfo.RepGrid\",\""+record.id+"\",\""+value+"\",\""+record.data.numtaskid+"\")'>"+value+"</span>"}},{header:"发送总数",tooltip:"发送总数",dataIndex:"rpt_count",sortable:true,renderer:function(value,meta,record,rowIndex,colIndex,store){if(record.get("numstatus")==0){return""}if(record.get("numstate")==1){soundManager.play('alertSound');return"<font color='red'>"+value+"</font>"}else{return"<font color='green'>"+value+"</font>"}}},{header:"失败数",tooltip:"失败数",dataIndex:"rpt_fail_count",sortable:true,renderer:function(value,meta,record,rowIndex,colIndex,store){if(record.get("numstatus")==0){return""}if(record.get("numstate")==1){return"<font color='red'>"+value+"</font>"}else{return"<font color='green'>"+value+"</font>"}}},{header:"失败率",tooltip:"失败率",dataIndex:"rpt_error_pct",sortable:true,renderer:function(value,meta,record,rowIndex,colIndex,store){if(record.get("numstatus")==0){return""}if(record.get("numstate")==1){return"<font color='red'>"+value+"</font>"}else{return"<font color='green'>"+value+"</font>"}}}]);var reportfailGrid=new Ext.grid.GridPanel({anchor:'100% 100%',bodyStyle:'width:100%',title:'',store:Js.Center.Alert.AlertInfo.reportfailInfostore,viewConfig:{autoFill:true,forceFit:true},autoHeight:true,sm:reportsm,cm:reportcm,tbar:new Ext.Toolbar({items:[{iconCls:'addicon',text:"报警设置",handler:function(){var record=Js.Center.Alert.AlertInfo.getAlertSetInfo();Js.Center.Alert.AlertReportSet.window.updateRecord=record;Js.Center.Alert.AlertReportSet.window.show();if(record.data.ReportRule_mode!=null){Js.Center.Alert.AlertReportSet.window.items.items[0].findByType("checkboxgroup")[0].setValue(record.data.ReportRule_mode.split(','))}else{Js.Center.Alert.AlertReportSet.window.items.items[0].findByType("checkboxgroup")[0].setValue('1')}}}]})});var delayFields=["numtaskid","numgwid","vc2gatewayname","sms_delay","sms_delay_average","numstate","numstatus"];Js.Center.Alert.AlertInfo.delayInfostore=new WXTL.Widgets.CommonData.GroupingStore({proxy:new Ext.data.HttpProxy({url:Js.Center.Alert.AlertQueryURL,method:"POST"}),reader:new Ext.data.JsonReader({fields:delayFields,root:"data",id:"numgwid",totalProperty:"totalCount"}),sortInfo:{field:'numtaskid',direction:'asc'},baseParams:{flag:'selectdelaymonitorinfo'}});var delaysm=new Ext.grid.CheckboxSelectionModel({dataIndex:"numgwid"});var delaycm=new Ext.grid.ColumnModel([{header:"模块ID",tooltip:"模块ID",dataIndex:"numtaskid",sortable:true},{header:"网关ID",tooltip:"网关ID",dataIndex:"numgwid",sortable:true},{header:"网关名称",tooltip:"网关名称",dataIndex:"vc2gatewayname",sortable:true,renderer:function(value,meta,record,rowIndex,colIndex,store){return"<span id='Js.Center.Alert.AlertInfo.DelayGrid"+record.id+"' onMouseOut='Js.Center.Alert.AlertInfo.mouseOutClose(\""+record.id+"\")'  onclick='Js.Center.Alert.AlertInfo.ModuleShow(\"Js.Center.Alert.AlertInfo.DelayGrid\",\""+record.id+"\",\""+value+"\",\""+record.data.numtaskid+"\")'>"+value+"</span>"}},{header:"平均延时(秒)",tooltip:"平均延时(秒)",dataIndex:"sms_delay_average",sortable:true,renderer:function(value,meta,record,rowIndex,colIndex,store){if(record.get("numstatus")==0){return""}if(value!='-1'){if(record.get("numstate")==1){soundManager.play('alertSound');return"<font color='red'>"+value+"</font>"}else{return"<font color='green'>"+value+"</font>"}}else{return""}}},{header:"最新延时(秒)",tooltip:"最新延时(秒)",dataIndex:"sms_delay",sortable:true,renderer:function(value,meta,record,rowIndex,colIndex,store){if(record.get("numstatus")==0){return""}else{if(value!='-1'){if(record.get("numstate")==1){return"<font color='red'>"+value+"</font>"}else{return"<font color='green'>"+value+"</font>"}}else{return""}}}}]);var delayGrid=new Ext.grid.GridPanel({anchor:'100% 100%',bodyStyle:'width:100%',store:Js.Center.Alert.AlertInfo.delayInfostore,viewConfig:{autoFill:true,forceFit:true},autoHeight:true,sm:delaysm,cm:delaycm,tbar:new Ext.Toolbar({items:[{iconCls:'addicon',text:"报警设置",handler:function(){var record=Js.Center.Alert.AlertInfo.getAlertSetInfo();Js.Center.Alert.AlertDelaySet.window.updateRecord=record;Js.Center.Alert.AlertDelaySet.window.show();if(record.data.SendTimelagRule_mode!=null){Js.Center.Alert.AlertDelaySet.window.items.items[0].findByType("checkboxgroup")[0].setValue(record.data.SendTimelagRule_mode.split(','))}else{Js.Center.Alert.AlertDelaySet.window.items.items[0].findByType("checkboxgroup")[0].setValue('1')}}}]})});Js.Center.Alert.AlertInfo.MainPanel=new Ext.Panel({frame:true,id:"Js.Center.Alert.AlertInfo.MainPanel",bodyBorder:false,border:false,autoScroll:true,layout:"anchor",defaults:{collapsible:true},items:[{bodyStyle:"padding:5px 0 0 15px",html:"<a href='#' onclick='commonSet(0)'>邮件报警设置</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href='#' onclick='commonSet(1)'>短信报警设置</a>"},{xtype:'portal',margins:'20 5 5 0',anchor:"98%",items:[{columnWidth:.5,items:[{title:'网关监控',autoHeight:true,autoScroll:true,style:'padding:10px 0 10px 10px',items:[gatewayGrid]},{title:'Response失败率监控',autoHeight:true,autoScroll:true,style:'padding:10px 0 10px 10px',items:[respfailGrid]}]},{columnWidth:.5,items:[{title:'Report失败率监控',autoHeight:true,autoScroll:true,style:'padding:10px 0 10px 10px',items:[reportfailGrid]},{title:'延时监控',autoHeight:true,autoScroll:true,style:'padding:10px 0 10px 10px',items:[delayGrid]}]}]}]})};Js.Center.Alert.AlertInfo.winShow=new Ext.Window({title:"监视信息",width:260,height:260,hidden:true,headerAsText:true,border:false,bodyBorder:false,plain:false,hideBorders:true,closable:true,autoScroll:false,closeAction:'hide',bodyStyle:"padding:10px 10px 10px 10px;background:#ffffff;",items:[{xtype:"label",fieldLabel:'',cls:'x-window-mc-showlabel',name:'vc2Message',id:'Js.Center.Alert.AlertInfo.vc2Message',html:""}],needButtons:false});GridMain(node,Js.Center.Alert.AlertInfo.MainPanel,"","","Js.Center.Alert.AlertInfo.getNewMonitorInfoFromDB('"+node.id+"')");Js.Center.Alert.AlertGatewaySet.func();Js.Center.Alert.AlertResponseSet.func();Js.Center.Alert.AlertDelaySet.func();Js.Center.Alert.AlertReportSet.func();Js.Center.Alert.AlertMailSet.func();Js.Center.Alert.AlertMobileSet.func();Js.Center.Alert.AlertInfo.getNewMonitorInfoFromDB(node.id);commonSet=function(type){var record=Js.Center.Alert.AlertInfo.getAlertSetInfo();if(type==0){Js.Center.Alert.AlertMailSet.window.updateRecord=record;Js.Center.Alert.AlertMailSet.window.show()}else if(type==1){Js.Center.Alert.AlertMobileSet.window.updateRecord=record;Js.Center.Alert.AlertMobileSet.window.show()}else{Js.Center.Alert.AlertPageSet.func()}}};Js.Center.Alert.AlertInfo.ModuleShow=function(gridType,id,value,taskid){try{var urlParam="?cmd=-U"+NUMCOMUNICATIONNODEID+" -F"+taskid+" -Cview";var commandCommonData=doSynRequest(Js.Center.Alert.AlertMonitorQueryURL+urlParam);var showInfo="";if(commandCommonData.success==true){var filesCount=commandCommonData.data.length;for(var i=0;i<filesCount;i++){showInfo+="<B>"+commandCommonData.data[i].cname+":</B>"+commandCommonData.data[i].value+"<br>"}}else{showInfo="没有监视信息！"}var positionX=Ext.fly(gridType+id+"").getX();var positionY=Ext.fly(gridType+id+"").getY();if(positionY<200){positionY=positionY+10}else{positionY=positionY-200}Js.Center.Alert.AlertInfo.winShow.doLayout();Js.Center.Alert.AlertInfo.winShow.setPosition(positionX+50,positionY);Js.Center.Alert.AlertInfo.winShow.show();Ext.get("Js.Center.Alert.AlertInfo.vc2Message").dom.innerHTML=showInfo}catch(err){Ext.Msg.alert("温馨提示","客户端请求异常!")}};Js.Center.Alert.AlertInfo.mouseOutClose=function(id){if(Js.Center.Alert.AlertInfo.winShow.hidden==false){Js.Center.Alert.AlertInfo.winShow.hide()}};Js.Center.Alert.AlertInfo.getNewMonitorInfoFromDB=function(nodeId){Js.Center.Alert.AlertInfo.respFailInfostore.reload();Js.Center.Alert.AlertInfo.reportfailInfostore.reload();Js.Center.Alert.AlertInfo.gatewayInfostore.reload();Js.Center.Alert.AlertInfo.delayInfostore.reload();setTimeout(function(){var _nodeId="tab"+nodeId;if(center.activeTab.id==_nodeId){Js.Center.Alert.AlertInfo.getNewMonitorInfoFromDB(nodeId)}},10000)};Js.Center.Alert.AlertInfo.getNewMonitorInfo=function(id){try{var urlParam="?cmd=-U"+id+" -Cviewall";var commonMonitorData=doSynRequest(Js.Center.Alert.AlertMonitorQueryURL+urlParam);var gatewayDataStore=Js.Center.Alert.AlertInfo.gatewayInfostore;var delayDataStore=Js.Center.Alert.AlertInfo.delayInfostore;if(commonMonitorData.success==true&&commonMonitorData.data!=null){if(commonMonitorData.data.length>=1){for(var i=0;i<commonMonitorData.data.length;i++){for(var j=0;j<gatewayDataStore.data.length;j++){if(commonMonitorData.data[i].modelid==gatewayDataStore.data.items[j].data.numtaskid){if(commonMonitorData.data[i].key=="CONNECTION_STATUS"){gatewayDataStore.getById(gatewayDataStore.data.items[j].data.numgwid).set('connection_status',commonMonitorData.data[i].value)}if(commonMonitorData.data[i].key=="MODULE_STATUS"){gatewayDataStore.getById(gatewayDataStore.data.items[j].data.numgwid).set('module_status',commonMonitorData.data[i].value)}if(commonMonitorData.data[i].key=="RESPONSE_COUNT"){gatewayDataStore.getById(gatewayDataStore.data.items[j].data.numgwid).set('response_count',commonMonitorData.data[i].value)}if(commonMonitorData.data[i].key=="SUBMIT_SPEED"){gatewayDataStore.getById(gatewayDataStore.data.items[j].data.numgwid).set('submit_speed',commonMonitorData.data[i].value)}if(commonMonitorData.data[i].key=="QUEUE_COUNT"){gatewayDataStore.getById(gatewayDataStore.data.items[j].data.numgwid).set('queue_count',commonMonitorData.data[i].value)}gatewayDataStore.getById(gatewayDataStore.data.items[j].data.numgwid).commit()}}for(var j=0;j<delayDataStore.data.length;j++){if(commonMonitorData.data[i].modelid==delayDataStore.data.items[j].data.numtaskid){if(commonMonitorData.data[i].key=="SMS_DELAY"){delayDataStore.getById(delayDataStore.data.items[j].data.numgwid).set('sms_delay',commonMonitorData.data[i].value)}}}}gatewayDataStore.commitChanges();delayDataStore.commitChanges()}}else{Ext.Msg.alert("温馨提示","服务器请求异常!")}}catch(err){Ext.Msg.alert("温馨提示","客户端请求异常!")}};Js.Center.Alert.AlertInfo.getAlertSetInfo=function(){try{var setInfoData=doSynRequest(Js.Center.Alert.AlertUpdateURL+"?flag=selectalertsetall");var record=new Ext.data.Record.create([{name:'GatewayStateRule_duration',type:'string',defaultValue:'10'},{name:'GatewayStateRule_mode',type:'string'},{name:'GatewayStateRule_times',type:'string'},{name:'GatewayStateRule_interval',type:'string'},{name:'GatewayStateRule_message',type:'string'},{name:'ResponseRule_duration',type:'string'},{name:'ResponseRule_failurerate',type:'string'},{name:'ResponseRule_sendvolume',type:'string'},{name:'ResponseRule_mode',type:'string'},{name:'ResponseRule_times',type:'string'},{name:'ResponseRule_interval',type:'string'},{name:'ResponseRule_message',type:'string'},{name:'ReportRule_duration',type:'string'},{name:'ReportRule_failurerate',type:'string'},{name:'ReportRule_sendvolume',type:'string'},{name:'ReportRule_mode',type:'string'},{name:'ReportRule_times',type:'string'},{name:'ReportRule_interval',type:'string'},{name:'ReportRule_message',type:'string'},{name:'SendTimelagRule_duration',type:'string'},{name:'SendTimelagRule_timelagduration',type:'string'},{name:'SendTimelagRule_mode',type:'string'},{name:'SendTimelagRule_times',type:'string'},{name:'SendTimelagRule_interval',type:'string'},{name:'SendTimelagRule_message',type:'string'},{name:'8001_sender',type:'string'},{name:'8001_server',type:'string'},{name:'8001_user',type:'string'},{name:'8001_password',type:'string'},{name:'8001_subject',type:'string'},{name:'8001_receiverlist',type:'string'},{name:'8001_defaultproduct',type:'string'},{name:'8001_mobilelist',type:'string'},{name:'8001_sound',type:'string'}]);var setInfoRecord=new record({});if(setInfoData.data!=null){for(var i=0;i<setInfoRecord.fields.items.length;i++){for(var j=0;j<setInfoData.data.length;j++){var field=setInfoRecord.fields.items[i].name;if(setInfoRecord.fields.items[i].name==setInfoData.data[j].key){setInfoRecord.set(setInfoRecord.fields.items[i].name,setInfoData.data[j].value)}}}}return setInfoRecord}catch(err){Ext.Msg.alert("温馨提示","客户端请求异常!")}};Ext.namespace('Js.Center.Alert.AlertGatewaySet');Js.Center.Alert.AlertGatewaySet.func=function(row){if(Js.Center.Alert.AlertGatewaySet.window==null){var mainFormPanel=new Ext.form.FormPanel({frame:true,labelWidth:110,layout:'form',defaults:{anchor:"90%",msgTarget:"under"},buttonAlign:"right",bodyStyle:"padding:10px 0 10px 15px",items:[{xtype:'hidden',name:'flag',value:'updategwalert'},{layout:'column',items:[{columnWidth:.21,layout:'form',defaults:{anchor:"60%",msgTarget:"under"},buttonAlign:"center",items:[{xtype:'numberfield',fieldLabel:"<font color=red>报警规则</font>",hidden:true}]},{columnWidth:.05,layout:'form',defaults:{anchor:"90%",msgTarget:"under"},buttonAlign:"center",items:[{html:'<div style="height:23px; line-height:25px;">连续 </div>'}]},{columnWidth:.1,layout:'form',defaults:{anchor:"90%",msgTarget:"title"},buttonAlign:"center",items:[{xtype:'numberfield',name:'GatewayStateRule_duration',hideLabel:true,minValue:0,maxValue:9999,autoCreate:{tag:'input',type:'text',size:'20',autocomplete:'off',maxlength:'4'}}]},{columnWidth:.64,layout:'form',defaults:{anchor:"90%",msgTarget:"under"},items:[{html:'<div style="height:23px; line-height:25px;">分钟断开时报警 </div>'}]}]},{xtype:'checkboxgroup',fieldLabel:"<font color=red>报警方式</font>",name:'GatewayStateRule_mode',anchor:'50%',items:[{boxLabel:'短信',name:'GatewayStateRule_mode',inputValue:'1'},{boxLabel:'邮件',name:'GatewayStateRule_mode',inputValue:'2'},{hidden:true,boxLabel:'默认值',name:'GatewayStateRule_mode',checked:true,inputValue:''}]},{xtype:'combo',name:"GatewayStateRule_times",fieldLabel:"<font color=red>连续报警次数</font>",hiddenName:"GatewayStateRule_times",anchor:'35%',allowBlank:false,blankText:"连续报警次数",readOnly:true,mode:"local",displayField:"show",valueField:"value",triggerAction:"all",emptyText:"-=请选择=-",store:new Ext.data.SimpleStore({fields:["show","value"],data:[["1次","1"],["2次","2"],["3次","3"]]})},{xtype:'combo',name:"GatewayStateRule_interval",fieldLabel:"<font color=red>两次报警时间间隔</font>",hiddenName:"GatewayStateRule_interval",anchor:'35%',allowBlank:false,blankText:"两次报警时间间隔",readOnly:true,mode:"local",displayField:"show",valueField:"value",triggerAction:"all",emptyText:"-=请选择=-",store:new Ext.data.SimpleStore({fields:["show","value"],data:[["5分钟","5"],["10分钟","10"],["15分钟","15"],["30分钟","30"],["1小时","60"]]})},{xtype:'textarea',name:'GatewayStateRule_message',fieldLabel:getHelpMsg("报警格式",true,"报警格式描述：<br>{0} 当前时间 <br>{1} 报警时间段 <br>{2} 网关名称 "),value:"截止{0}，连续{1}分钟处于断开状态的网关有：{2}",regex:WXTL.Common.regex.Illegal,regexText:WXTL.Common.regexText.IllegalText,maxLength:100}]});var mainForm=mainFormPanel.getForm();this.window=new WXTL.Widgets.CommonWindows.Window({title:"网关报警设置",mainForm:mainForm,updateURL:Js.Center.Alert.AlertUpdateURL,updateState:true,updateRecord:row,displayStore:null,items:[mainFormPanel],needButtons:false,buttons:[new Ext.Button({text:'确定',minWidth:70,handler:function(){if(mainForm.isValid()){Ext.MessageBox.show({msg:'正在保存，请稍等...',progressText:'Saving...',width:300,wait:true,icon:'download',animEl:'saving'});setTimeout(function(){Ext.MessageBox.hide()},300000);Js.Center.Alert.AlertGatewaySet.window.mainFormSubmitFunc()}}}),new Ext.Button({text:'重置',minWidth:70,qtip:"重置数据",handler:function(obj){mainForm.reset();mainForm.loadRecord(Js.Center.Alert.AlertGatewaySet.window.updateRecord);if(Js.Center.Alert.AlertGatewaySet.window.updateRecord.data.GatewayStateRule_mode!=null){mainFormPanel.findByType("checkboxgroup")[0].setValue(Js.Center.Alert.AlertGatewaySet.window.updateRecord.data.GatewayStateRule_mode.split(','))}else{mainFormPanel.findByType("checkboxgroup")[0].setValue('1')}}}),new Ext.Button({text:'取消',minWidth:70,handler:function(){Js.Center.Alert.AlertGatewaySet.window.hide()}})]})};};Ext.namespace('Js.Center.Alert.AlertResponseSet');Js.Center.Alert.AlertResponseSet.func=function(row){if(Js.Center.Alert.AlertResponseSet.window==null){var mainFormPanel=new Ext.form.FormPanel({frame:true,labelWidth:110,layout:'form',defaults:{anchor:"98%",msgTarget:"title"},buttonAlign:"right",bodyStyle:"padding:10px 0 10px 15px",items:[{xtype:'hidden',name:'flag',value:'updateresponsealert'},{layout:'column',items:[{columnWidth:.158,layout:'form',defaults:{anchor:"60%",msgTarget:"title"},buttonAlign:"center",items:[{xtype:'numberfield',fieldLabel:"<font color=red>报警规则</font>",hidden:true}]},{columnWidth:.04,layout:'form',defaults:{anchor:"99%",msgTarget:"title"},buttonAlign:"center",items:[{html:'<div style="height:23px; line-height:25px;">最近  </div>'}]},{columnWidth:.066,layout:'form',defaults:{anchor:"99%",msgTarget:"title"},buttonAlign:"center",items:[{xtype:'numberfield',name:'ResponseRule_duration',hideLabel:true,minValue:0,maxValue:9999,autoCreate:{tag:'input',type:'text',size:'20',autocomplete:'off',maxlength:'4'}}]},{columnWidth:.21,layout:'form',defaults:{anchor:"99%",msgTarget:"title"},items:[{html:'<div style="height:23px; line-height:25px;">分钟内Response失败率超过 </div>'}]},{columnWidth:.07,layout:'form',defaults:{anchor:"99%",msgTarget:"title"},buttonAlign:"center",items:[{xtype:'numberfield',name:'ResponseRule_failurerate',hideLabel:true,minValue:0,maxValue:100,autoCreate:{tag:'input',type:'text',size:'20',autocomplete:'off',maxlength:'3'}}]},{columnWidth:.16,layout:'form',defaults:{anchor:"99%",msgTarget:"title"},items:[{html:'<div style="height:23px; line-height:25px;">%且累计发送量超过  </div>'}]},{columnWidth:.17,layout:'form',defaults:{anchor:"99%",msgTarget:"title"},buttonAlign:"center",items:[{xtype:'numberfield',name:'ResponseRule_sendvolume',hideLabel:true,minValue:0,maxLength:15,autoCreate:{tag:'input',type:'text',size:'20',autocomplete:'off',maxlength:'15'}}]},{columnWidth:.09,layout:'form',defaults:{anchor:"99%",msgTarget:"title"},items:[{html:'<div style="height:23px; line-height:25px;">条时报警  </div>'}]}]},{xtype:'checkboxgroup',fieldLabel:"<font color=red>报警方式</font>",anchor:'50%',items:[{boxLabel:'短信',name:'ResponseRule_mode',inputValue:'1'},{boxLabel:'邮件',name:'ResponseRule_mode',inputValue:'2'},{hidden:true,boxLabel:'默认值',name:'ResponseRule_mode',checked:true,inputValue:''}]},{xtype:'combo',name:"ResponseRule_times",fieldLabel:"<font color=red>连续报警次数</font>",hiddenName:"ResponseRule_times",anchor:'35%',allowBlank:false,blankText:"连续报警次数",readOnly:true,mode:"local",displayField:"show",valueField:"value",triggerAction:"all",emptyText:"-=请选择=-",store:new Ext.data.SimpleStore({fields:["show","value"],data:[["1次","1"],["2次","2"],["3次","3"]]})},{xtype:'combo',name:"ResponseRule_interval",fieldLabel:"<font color=red>两次报警时间间隔</font>",hiddenName:"ResponseRule_interval",anchor:'35%',allowBlank:false,blankText:"两次报警时间间隔",readOnly:true,mode:"local",displayField:"show",valueField:"value",triggerAction:"all",emptyText:"-=请选择=-",store:new Ext.data.SimpleStore({fields:["show","value"],data:[["5分钟","5"],["10分钟","10"],["15分钟","15"],["30分钟","30"],["1小时","60"]]})},{xtype:'textarea',name:'ResponseRule_message',fieldLabel:getHelpMsg("报警格式",true,"报警格式描述：<br>{0} 当前时间 <br>{1} 报警时间段 <br> {2}response失败率，超过此值报警<br> {3}累计发送量 <br>{4}网关名称"),value:"截止{0}，{1}分钟内，Response失败率超过{2}％，且累计发送量超过{3}条的网关有：{4}",regex:WXTL.Common.regex.Illegal,regexText:WXTL.Common.regexText.IllegalText,maxLength:100}]});var mainForm=mainFormPanel.getForm();this.window=new WXTL.Widgets.CommonWindows.Window({title:"Response失败率报警设置",width:780,mainForm:mainForm,updateURL:Js.Center.Alert.AlertUpdateURL,updateState:true,updateRecord:row,displayStore:null,items:[mainFormPanel],needButtons:false,buttons:[new Ext.Button({text:'确定',minWidth:70,handler:function(){if(mainForm.isValid()){Ext.MessageBox.show({msg:'正在保存，请稍等...',progressText:'Saving...',width:300,wait:true,icon:'download',animEl:'saving'});setTimeout(function(){Ext.MessageBox.hide()},300000);Js.Center.Alert.AlertResponseSet.window.mainFormSubmitFunc()}}}),new Ext.Button({text:'重置',minWidth:70,qtip:"重置数据",handler:function(obj){mainForm.reset();mainForm.loadRecord(Js.Center.Alert.AlertResponseSet.window.updateRecord);if(Js.Center.Alert.AlertResponseSet.window.updateRecord.data.ResponseRule_mode!=null){mainFormPanel.findByType("checkboxgroup")[0].setValue(Js.Center.Alert.AlertResponseSet.window.updateRecord.data.ResponseRule_mode.split(','))}else{mainFormPanel.findByType("checkboxgroup")[0].setValue('1')}}}),new Ext.Button({text:'取消',minWidth:70,handler:function(){Js.Center.Alert.AlertResponseSet.window.hide()}})]})};};Ext.namespace('Js.Center.Alert.AlertReportSet');Js.Center.Alert.AlertReportSet.func=function(row){if(Js.Center.Alert.AlertReportSet.window==null){var mainFormPanel=new Ext.form.FormPanel({frame:true,labelWidth:110,layout:'form',defaults:{anchor:"98%",msgTarget:"title"},buttonAlign:"right",bodyStyle:"padding:10px 0 10px 15px",items:[{xtype:'hidden',name:'flag',value:'updatereportalert'},{layout:'column',items:[{columnWidth:.176,layout:'form',defaults:{anchor:"60%",msgTarget:"title"},buttonAlign:"center",items:[{xtype:'numberfield',fieldLabel:"<font color=red>报警规则</font>",hidden:true}]},{columnWidth:.04,layout:'form',defaults:{anchor:"99%",msgTarget:"title"},buttonAlign:"center",items:[{html:'<div style="height:23px; line-height:25px;">最近  </div>'}]},{columnWidth:.06,layout:'form',defaults:{anchor:"99%",msgTarget:"title"},buttonAlign:"center",items:[{xtype:'numberfield',name:'ReportRule_duration',hideLabel:true,minValue:0,maxValue:9999,autoCreate:{tag:'input',type:'text',size:'20',autocomplete:'off',maxlength:'4'}}]},{columnWidth:.21,layout:'form',defaults:{anchor:"99%",msgTarget:"title"},items:[{html:'<div style="height:23px; line-height:25px;">分钟内Report失败率超过  </div>'}]},{columnWidth:.055,layout:'form',defaults:{anchor:"99%",msgTarget:"title"},buttonAlign:"center",items:[{xtype:'numberfield',name:'ReportRule_failurerate',hideLabel:true,minValue:0,maxValue:100,autoCreate:{tag:'input',type:'text',size:'20',autocomplete:'off',maxlength:'3'}}]},{columnWidth:.17,layout:'form',defaults:{anchor:"99%",msgTarget:"title"},items:[{html:'<div style="height:23px; line-height:25px;">%且累计发送量超过  </div>'}]},{columnWidth:.18,layout:'form',defaults:{anchor:"99%",msgTarget:"title"},buttonAlign:"center",items:[{xtype:'numberfield',name:'ReportRule_sendvolume',hideLabel:true,minValue:0,maxLength:15,autoCreate:{tag:'input',type:'text',size:'20',autocomplete:'off',maxlength:'15'}}]},{columnWidth:.09,layout:'form',defaults:{anchor:"99%",msgTarget:"title"},items:[{html:'<div style="height:23px; line-height:25px;">条时报警  </div>'}]}]},{xtype:'checkboxgroup',fieldLabel:"<font color=red>报警方式</font>",anchor:'50%',items:[{boxLabel:'短信',name:'ReportRule_mode',inputValue:'1'},{boxLabel:'邮件',name:'ReportRule_mode',inputValue:'2'},{hidden:true,boxLabel:'默认值',name:'ReportRule_mode',checked:true,inputValue:''}]},{xtype:'combo',name:"ReportRule_times",fieldLabel:"<font color=red>连续报警次数</font>",hiddenName:"ReportRule_times",anchor:'35%',allowBlank:false,blankText:"连续报警次数",readOnly:true,mode:"local",displayField:"show",valueField:"value",triggerAction:"all",emptyText:"-=请选择=-",store:new Ext.data.SimpleStore({fields:["show","value"],data:[["1次","1"],["2次","2"],["3次","3"]]})},{xtype:'combo',name:"ReportRule_interval",fieldLabel:"<font color=red>两次报警时间间隔</font>",hiddenName:"ReportRule_interval",anchor:'35%',allowBlank:false,blankText:"两次报警时间间隔",readOnly:true,mode:"local",displayField:"show",valueField:"value",triggerAction:"all",emptyText:"-=请选择=-",store:new Ext.data.SimpleStore({fields:["show","value"],data:[["5分钟","5"],["10分钟","10"],["15分钟","15"],["30分钟","30"],["1小时","60"]]})},{xtype:'textarea',name:'ReportRule_message',fieldLabel:getHelpMsg("报警格式",true,"报警格式描述：<br>{0} 当前时间 <br>{1} 报警时间段<br> {2}report失败率，超过此值报警 <br>{3}累计发送量 <br>{4}网关名称 "),value:"截止{0}，{1}分钟内 Report失败率超过{2}％，且累计发送量超过{3}条的网关有：{4}"}]});var mainForm=mainFormPanel.getForm();this.window=new WXTL.Widgets.CommonWindows.Window({title:"Report失败率报警设置",width:720,mainForm:mainForm,updateURL:Js.Center.Alert.AlertUpdateURL,updateState:true,updateRecord:row,displayStore:null,items:[mainFormPanel],needButtons:false,buttons:[new Ext.Button({text:'确定',minWidth:70,handler:function(){if(mainForm.isValid()){Ext.MessageBox.show({msg:'正在保存，请稍等...',progressText:'Saving...',width:300,wait:true,icon:'download',animEl:'saving'});setTimeout(function(){Ext.MessageBox.hide()},300000);Js.Center.Alert.AlertReportSet.window.mainFormSubmitFunc()}}}),new Ext.Button({text:'重置',minWidth:70,qtip:"重置数据",handler:function(obj){mainForm.reset();mainForm.loadRecord(Js.Center.Alert.AlertReportSet.window.updateRecord);if(Js.Center.Alert.AlertReportSet.window.updateRecord.data.ReportRule_mode!=null){mainFormPanel.findByType("checkboxgroup")[0].setValue(Js.Center.Alert.AlertReportSet.window.updateRecord.data.ReportRule_mode.split(','))}else{mainFormPanel.findByType("checkboxgroup")[0].setValue('1')}}}),new Ext.Button({text:'取消',minWidth:70,handler:function(){Js.Center.Alert.AlertReportSet.window.hide()}})]})};};Ext.namespace('Js.Center.Alert.AlertDelaySet');Js.Center.Alert.AlertDelaySet.func=function(row){if(Js.Center.Alert.AlertDelaySet.window==null){var mainFormPanel=new Ext.form.FormPanel({frame:true,labelWidth:110,layout:'form',defaults:{anchor:"90%",msgTarget:"title"},buttonAlign:"right",bodyStyle:"padding:10px 0 10px 15px",items:[{xtype:'hidden',name:'flag',value:'updatedelayalert'},{layout:'column',items:[{columnWidth:.21,layout:'form',defaults:{anchor:"60%",msgTarget:"title"},buttonAlign:"center",items:[{xtype:'numberfield',fieldLabel:"<font color=red>报警规则</font>",hidden:true}]},{columnWidth:.05,layout:'form',defaults:{anchor:"99%",msgTarget:"title"},buttonAlign:"center",items:[{html:'<div style="height:23px; line-height:25px;">最近 </div>'}]},{columnWidth:.1,layout:'form',defaults:{anchor:"99%",msgTarget:"title"},buttonAlign:"center",items:[{xtype:'numberfield',name:'SendTimelagRule_duration',hideLabel:true,minValue:0,maxValue:9999,autoCreate:{tag:'input',type:'text',size:'20',autocomplete:'off',maxlength:'4'}}]},{columnWidth:.25,layout:'form',defaults:{anchor:"99%",msgTarget:"title"},items:[{html:'<div style="height:23px; line-height:25px;">分钟内平均处理延时超过 </div>'}]},{columnWidth:.1,layout:'form',defaults:{anchor:"99%",msgTarget:"title"},buttonAlign:"center",items:[{xtype:'numberfield',name:'SendTimelagRule_timelagduration',hideLabel:true,minValue:0,maxValue:9999,autoCreate:{tag:'input',type:'text',size:'20',autocomplete:'off',maxlength:'4'}}]},{columnWidth:.2,layout:'form',defaults:{anchor:"99%",msgTarget:"title"},items:[{html:'<div style="height:23px; line-height:25px;">分钟时报警 </div>'}]}]},{xtype:'checkboxgroup',fieldLabel:"<font color=red>报警方式</font>",anchor:'50%',items:[{boxLabel:'短信',name:'SendTimelagRule_mode',inputValue:'1'},{boxLabel:'邮件',name:'SendTimelagRule_mode',inputValue:'2'},{hidden:true,boxLabel:'默认值',name:'SendTimelagRule_mode',checked:true,inputValue:''}]},{xtype:'combo',name:"SendTimelagRule_times",fieldLabel:"<font color=red>连续报警次数</font>",hiddenName:"SendTimelagRule_times",anchor:'35%',allowBlank:false,blankText:"连续报警次数",readOnly:true,mode:"local",displayField:"show",valueField:"value",triggerAction:"all",emptyText:"-=请选择=-",store:new Ext.data.SimpleStore({fields:["show","value"],data:[["1次","1"],["2次","2"],["3次","3"]]})},{xtype:'combo',name:"SendTimelagRule_interval",fieldLabel:"<font color=red>两次报警时间间隔</font>",hiddenName:"SendTimelagRule_interval",anchor:'35%',allowBlank:false,blankText:"两次报警时间间隔",readOnly:true,mode:"local",displayField:"show",valueField:"value",triggerAction:"all",emptyText:"-=请选择=-",store:new Ext.data.SimpleStore({fields:["show","value"],data:[["5分钟","5"],["10分钟","10"],["15分钟","15"],["30分钟","30"],["1小时","60"]]})},{xtype:'textarea',name:'SendTimelagRule_message',fieldLabel:getHelpMsg("报警格式",true,"报警格式描述：<br>{0} 当前时间<br> {1} 报警时间段<br> {2}延时超过时间<br> {3}网关名称"),value:"截止{0}，{1}分钟内平均延时处理超过{2}分钟的网关有：{3}",regex:WXTL.Common.regex.Illegal,regexText:WXTL.Common.regexText.IllegalText,maxLength:100}]});var mainForm=mainFormPanel.getForm();this.window=new WXTL.Widgets.CommonWindows.Window({title:"延时报警设置",mainForm:mainForm,updateURL:Js.Center.Alert.AlertUpdateURL,updateState:true,updateRecord:row,displayStore:null,items:[mainFormPanel],needButtons:false,buttons:[new Ext.Button({text:'确定',minWidth:70,handler:function(){if(mainForm.isValid()){Ext.MessageBox.show({msg:'正在保存，请稍等...',progressText:'Saving...',width:300,wait:true,icon:'download',animEl:'saving'});setTimeout(function(){Ext.MessageBox.hide()},300000);Js.Center.Alert.AlertDelaySet.window.mainFormSubmitFunc()}}}),new Ext.Button({text:'重置',minWidth:70,qtip:"重置数据",handler:function(obj){mainForm.reset();mainForm.loadRecord(Js.Center.Alert.AlertDelaySet.window.updateRecord);if(Js.Center.Alert.AlertDelaySet.window.updateRecord.data.SendTimelagRule_mode!=null){mainFormPanel.findByType("checkboxgroup")[0].setValue(Js.Center.Alert.AlertDelaySet.window.updateRecord.data.SendTimelagRule_mode.split(','))}else{mainFormPanel.findByType("checkboxgroup")[0].setValue('1')}}}),new Ext.Button({text:'取消',minWidth:70,handler:function(){Js.Center.Alert.AlertDelaySet.window.hide()}})]})};};Ext.namespace('Js.Center.Alert.AlertMailSet');Js.Center.Alert.AlertMailSet.func=function(row){if(Js.Center.Alert.AlertMailSet.window==null){var mainFormPanel=new Ext.form.FormPanel({frame:true,labelWidth:110,items:[{layout:'column',items:[{xtype:'hidden',name:'flag',value:'updatealertmailset'},{columnWidth:.5,layout:'form',defaultType:"textfield",defaults:{anchor:"90%",msgTarget:"side"},buttonAlign:"center",bodyStyle:"padding:10px 0 5px 15px",items:[{xtype:'textfield',name:'8001_sender',fieldLabel:'<font color=red>发送人邮件地址</font>',allowBlank:false,blankText:"发送人邮件地址不允许为空",regex:WXTL.Common.regex.Email,regexText:"请输入正确的邮件地址",maxLength:50},{xtype:'textfield',name:'8001_user',fieldLabel:'<font color=red>用户名</font>',allowBlank:false,blankText:"用户名不允许为空",regex:WXTL.Common.regex.Illegal,regexText:WXTL.Common.regexText.IllegalText,maxLength:50}]},{columnWidth:.5,layout:'form',defaultType:"textfield",defaults:{anchor:"90%",msgTarget:"side"},buttonAlign:"center",bodyStyle:"padding:10px 0 5px 15px",items:[{xtype:'textfield',name:'8001_server',fieldLabel:'<font color=red>发送服务器</font>',allowBlank:false,blankText:"发送服务器不允许为空",regex:WXTL.Common.regex.Illegal,regexText:WXTL.Common.regexText.IllegalText,maxLength:100},{xtype:'textfield',name:'8001_password',fieldLabel:'<font color=red>密码</font>',inputType:'password',allowBlank:false,blankText:"密码不允许为空",regex:WXTL.Common.regex.Illegal,regexText:WXTL.Common.regexText.IllegalText,maxLength:20}]},{columnWidth:1,layout:'form',defaultType:"textfield",defaults:{anchor:"95%",msgTarget:"side"},buttonAlign:"center",bodyStyle:"padding:0px 0 10px 15px",items:[{xtype:'textfield',name:'8001_subject',fieldLabel:'默认邮件主题',regex:WXTL.Common.regex.Illegal,regexText:WXTL.Common.regexText.IllegalText,maxLength:100},{xtype:'textarea',name:'8001_receiverlist',fieldLabel:getHelpMsg("接收预警信息的邮件地址",true,"1、每行一个邮件地址，以回车换行<br>2、最多可输入10行<br>3、示例：<br>admin@ihandy.cn<br>user@ihandy.cn"),width:300,height:200,allowBlank:false,blankText:"请输入邮件列表",maxLength:200,maxLengthText:"请将输入内容总长度控制在200以内！",validator:function(value){return checkMailList(value,10)}}]}]}]});var mainForm=mainFormPanel.getForm();this.window=new WXTL.Widgets.CommonWindows.Window({title:"邮件设置",mainForm:mainForm,updateURL:Js.Center.Alert.AlertUpdateURL,updateState:true,updateRecord:row,displayStore:null,items:[mainFormPanel]})};};Ext.namespace('Js.Center.Alert.AlertMobileSet');Js.Center.Alert.AlertMobileSet.func=function(row){Js.Center.Common.ProductStore.reload({params:{vc2servicetype:'1'}});if(Js.Center.Alert.AlertMobileSet.window==null){var mainFormPanel=new Ext.form.FormPanel({frame:true,labelWidth:110,layout:'form',defaults:{anchor:"90%",msgTarget:"side"},buttonAlign:"right",bodyStyle:"padding:10px 0 10px 15px",items:[{xtype:'hidden',name:'flag',value:'updatealertmobileset'},{xtype:"xComboBox",name:"8001_defaultproduct",fieldLabel:"<font color=red>通道组</font>",hiddenName:"8001_defaultproduct",readOnly:true,mode:"local",typeAhead:true,triggerAction:'all',selectOnFocus:true,emptyText:'-=请选择=-',allowBlank:false,blankText:"通道组不允许为空",displayField:'vc2name',valueField:'numprodid',store:Js.Center.Common.ProductStore},{xtype:'textarea',name:'8001_mobilelist',fieldLabel:getHelpMsg("接收预警信息的手机号码",true,"1、每行一个手机号码，以回车换行<br>2、最多可输入15行<br>3、示例：<br>13800000000<br>13900000000"),width:300,height:200,allowBlank:false,blankText:"请输入手机号码列表",maxLength:200,maxLengthText:"请将输入内容控制在15行以内！",validator:function(value){return checkMobileList(value,15)}}]});var mainForm=mainFormPanel.getForm();this.window=new WXTL.Widgets.CommonWindows.Window({title:"手机号码设置",mainForm:mainForm,updateURL:Js.Center.Alert.AlertUpdateURL,updateState:true,updateRecord:row,displayStore:null,items:[mainFormPanel],needLoadDataStore:true,loadDataStoreFunc:function(){Js.Center.Common.ProductStore.reload()}})};};