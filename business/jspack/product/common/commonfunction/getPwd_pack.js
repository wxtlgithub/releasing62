Ext.BLANK_IMAGE_URL='extjs2.0/resources/images/default/s.gif';Ext.QuickTips.init();Ext.form.Field.prototype.msgTarget='side';var getPwdForm;showGetPwdForm=function(){getPwdForm=new Ext.form.FormPanel({title:'光大短信平台获取密码页',labelWidth:100,width:400,height:200,frame:true,labelSeparator:'：',applyTo:'form',items:[new Ext.form.TextField({fieldLabel:'用户名',name:'username',allowBlank:false,blankText:'用户名不为空！'})],buttons:[new Ext.Button({text:'提交',handler:getPwd}),new Ext.Button({text:'重置',handler:reset}),new Ext.Button({text:'返回',handler:showLoginForm})]})};function getPwd(){if(getPwdForm.form.isValid()){getPwdForm.form.submit({clientValidation:true,waitMsg:'正在获取密码请稍后',waitTitle:'提示',url:getPwdURL,method:'POST',success:function(form,action){var obj=Ext.util.JSON.decode(action.response.responseText);var falg=obj.success;if(falg==true){Ext.Msg.alert("温馨提示","密码已发送至您邮箱，请查收!");window.location.href="login.htm"}else Ext.Msg.alert('温馨提示',obj.info)},failure:function(form,action){var objJson=Ext.util.JSON.decode(action.response.responseText);Ext.Msg.alert('温馨提示',objJson.info)}})}};function showLoginForm(){window.location.href="login.htm"};function reset(){getPwdForm.form.reset()};Ext.onReady(function(){showGetPwdForm()});