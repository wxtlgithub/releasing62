Ext.namespace('Js.Center.Business.UserGroupMemberAdd');Js.Center.Business.UserGroupMemberAdd.info = function(node){        var tempStore = new Ext.data.Store({        proxy: new Ext.data.HttpProxy({            url: Js.Center.Business.UserGroupURL,            method: "POST"        }),        reader: new Ext.data.JsonReader({            fields: ['numusergroupid', 'vc2usergroupname'],            root: 'data',            id: 'numusergroupid'        }),        baseParams: {            flag: 'selectall',            columnlist: 'numusergroupid,vc2usergroupname'        }    });    tempStore.reload();    if (Ext.get("Js.Center.Business.UserGroupMemberAdd.MainPanel") == null) {        //============================================================================定义GridPanel相关        // 分页每页显示数量        var _pageSize = 12;        //==============================================================Grid数据定义                Js.Center.Business.UserGroupMemberAdd.Infostore = new WXTL.Widgets.CommonData.GroupingStore({            proxy: new Ext.data.HttpProxy({                url: Js.Center.Business.usergroupmemberURL,                method: "POST"            }),            reader: new Ext.data.JsonReader({                fields: ["numlogid", "numdataid", "numstate", "vc2departname", "numtype", "numlogid", "vc2columnname", "numtotalnum", "numsuccessnum", "vc2username", "datcreattime"],                root: "data",                id: "numlogid",                totalProperty: "totalCount"                        }),            baseParams: {                flag: 'selectlog',                numtypeid: '5,6',                datcreattimestart: Ext.util.Format.date(WXTL.Common.dateTime.addDay(WXTL.Common.dateTime.getNow(), -7/*减3天*/), 'Y-m-d'),                datcreattimeend: Ext.util.Format.date(WXTL.Common.dateTime.getNow(), 'Y-m-d'),                numdepartid: '',                numcolumnid: ''            }        });        Js.Center.Business.UserGroupMemberAdd.Infostore.load({            params: {                start: 0,                limit: _pageSize            }        });                //==============================================================列选择模式        var sm = new Ext.grid.CheckboxSelectionModel({            dataIndex: "numcolumnid"        });        //==============================================================列头        var cm = new Ext.grid.ColumnModel([{            header: "客户组名称",            tooltip: "客户组名称",            dataIndex: "vc2columnname",            sortable: true        }, {            header: "部门名称",            tooltip: "部门名称",            dataIndex: "vc2departname",            sortable: true        }, {            header: "处理状态",            tooltip: "处理状态",            dataIndex: "numstate",            sortable: true        }, {            header: "总数",            tooltip: "总数",            dataIndex: "numtotalnum",            sortable: true        }, {            header: "成功数",            tooltip: "成功数",            dataIndex: "numsuccessnum",            sortable: true        }, {            header: "操作类型",            tooltip: "操作类型",            dataIndex: "numtype",            sortable: true,            renderer: function(value){                            if (value == 5) {                    return "添加";                }                if (value == 6) {                    return "退出";                }            }        }, {            header: "操作人",            tooltip: "操作人",            dataIndex: "vc2username",            sortable: true        }, {            header: "操作时间",            tooltip: "操作时间",            dataIndex: "datcreattime",            sortable: true        }, {            header: "操作",            tooltip: "操作",            dataIndex: "numsvcid",            width: 50,            renderer: function(value, meta, record, rowIndex, colIndex, store){                return "<a href='#' onclick='doLoad(\"" + Js.Center.Business.ColumNmemberURL + "\",\"" + record.data.numlogid + "\")'>详情下载</a>";            }        }]);                //==============================================================定义grid        var gridPanel = new WXTL.Widgets.CommonGrid.GridPanel({            id: "usergroupmemberaddGridPanel",            anchor: '100% 100%',            pageSize: _pageSize,            store: Js.Center.Business.UserGroupMemberAdd.Infostore,            needMenu: false,            needRightMenu: false,            sm: sm,            cm: cm,            tbar: new Ext.Toolbar({                items: [{                    iconCls: 'addicon',                    text: "添加",                    handler: function(){                        Js.Center.Business.UserGroupMemberAdd.func();                    }                }, {                    iconCls: 'deleteicon',                    text: "退出",                    handler: function(){                        Js.Center.Business.UserGroupMemberDelete.func();                    }                }]            })        });                //============================================================================ 定义formpanel                //==============================================================部门下拉列表数据定义                Js.Center.Common.DepartmentStore.load();                //=============================================================栏目下拉列表数据定义                Js.Center.Common.UserGroupStore.reload();                //=============================================================定义formpanel        var selectPanel = new WXTL.Widgets.CommonPanel.QueryFormPanel({            id: "usergroupmemberaddSelectPanel",            //查询调用的方法                        height: "200",            collapsed: "false",            queryMethod: "Js.Center.Business.UserGroupMemberAdd.queryGrid",            items: [{                layout: 'column',                items: [{                    columnWidth: .5,                    layout: 'form',                    defaultType: "textfield",                    //锚点布局-                    defaults: {                        anchor: "90%",                        msgTarget: "side"                    },                    buttonAlign: "center",                    bodyStyle: "padding:10px 0 10px 15px",                    items: [{                        xtype: "datefield",                        fieldLabel: "开始时间",                        format: 'Y-m-d',                        labelWidth: 100,                        bodyStyle: 'padding:5px 5px 0',                        readOnly: true,                        emptyText: Ext.util.Format.date(WXTL.Common.dateTime.addDay(WXTL.Common.dateTime.getNow(), -7/*减3天*/), 'Y-m-d'),                        fieldLabel: "开始时间",                        name: "datcreattimestart",                        id: "usergroupmemberadddatcreattimestart"                    }, {                        xtype: "xComboBox",                        name: "numdepartid",                        fieldLabel: "选择部门",                        hiddenName: "usergroupmemberaddnumdepartid",                        blankText: "-=请选择=-",                        readOnly: true,                        mode: "local",                        displayField: "vc2departname",                        valueField: "numdepartid",                        store: Js.Center.Common.DepartmentStore                    }, {                        xtype: "combo",                        name: "numtype",                        fieldLabel: "操作类型",                        hiddenName: "usergroupmemberaddvc2type",                        blankText: "-=请选择=-",                        readOnly: true,                        mode: "local",                        displayField: "vc2name",                        valueField: "value",                        triggerAction: "all",                        emptyText: '-=请选择=-',                        value: "5,6",                        store: new Ext.data.SimpleStore({                            fields: ["vc2name", "value"],                            data: [["-=请选择=-", "5,6"], ["添加", "5"], ["退出", "6"]]                        })                    }]                }, {                    columnWidth: .5,                    layout: 'form',                    defaultType: "textfield",                    //锚点布局-                    defaults: {                        anchor: "90%",                        msgTarget: "side"                    },                    buttonAlign: "center",                    bodyStyle: "padding:10px 0 10px 15px",                    items: [{                        xtype: "datefield",                        fieldLabel: "结束时间",                        labelWidth: 100,                        format: 'Y-m-d',                        bodyStyle: 'padding:5px 5px 0',                        readOnly: true,                        emptyText: Ext.util.Format.date(WXTL.Common.dateTime.getNow(), 'Y-m-d'),                        name: "datcreattimeend",                        id: "usergroupmemberadddatcreattimeend"                    }, {                        xtype: "xComboBox",                        name: "numusergroupid",                        fieldLabel: "选择客户组",                        emptyText: '-=请选择=-',                        hiddenName: "usergroupmemberaddnumusergroupid",                        mode: "local",                        displayField: "vc2usergroupname",                        valueField: "numusergroupid",                        triggerAction: "all",                        store: tempStore                    }]                }]            }]        });                //============================================================== 定义查询按钮事件方法        Js.Center.Business.UserGroupMemberAdd.queryGrid = function(){            var datCreatTimeStart = Ext.get("usergroupmemberadddatcreattimestart").getValue();            var datCreatTimeend = Ext.get("usergroupmemberadddatcreattimeend").getValue();            var numDepartId = Ext.get("usergroupmemberaddnumdepartid").getValue();            var _numusergroupid = Ext.get("usergroupmemberaddnumusergroupid").getValue();            var numTypeId = Ext.get("usergroupmemberaddvc2type").getValue();            var flag = 'selectlog';            Js.Center.Business.UserGroupMemberAdd.Infostore.baseParams = {                flag: flag,                numtypeid: _numtypeid,//5,                datcreattimestart: datCreatTimeStart,                datcreattimeend: datCreatTimeend,                numdepartid: numDepartId,                numusergroupid: _numusergroupid            };            Js.Center.Business.UserGroupMemberAdd.Infostore.load({                params: {                    start: 0,                    limit: _pageSize                }            });        };                //============================================================================定义主panel        Js.Center.Business.UserGroupMemberAdd.MainPanel = new Ext.Panel({            id: "Js.Center.Business.UserGroupMemberAdd.MainPanel",            frame: true, // 渲染面板            bodyBorder: false,            border: false,            autoScroll: true, // 自动显示滚动条            layout: "anchor",            defaults: {                collapsible: true // 允许展开和收缩            },            items: [selectPanel, gridPanel]        });    };    //============================================================================绑定到center    GridMain(node, Js.Center.Business.UserGroupMemberAdd.MainPanel, "openroomiconinfo", "Js.Center.Business.UserGroupMemberAdd.Infostore");};