Ext.namespace('Js.Center.Statistics.ChargeBysvc');Js.Center.Statistics.ChargeBysvc.info = function(node){       if (Ext.get("Js.Center.Statistics.ChargeBysvc.MainPanel") == null) {                //============================================================================定义GridPanel相关        // 分页每页显示数量        var _pageSize = 12;        //==============================================================Grid数据定义                Js.Center.Statistics.ChargeBysvc.Infostore = new WXTL.Widgets.CommonData.GroupingStore({            proxy: new Ext.data.HttpProxy({                url: Js.Center.Statistics.StatisticsMtURL,                method: "POST"            }),            reader: new Ext.data.JsonReader({                fields: ["nummonthid", "numdepartid", "numopid", "vc2opername", "numsvcid", "vc2svcname", "nummessageformat", "vc2feevalue", "numresp_succnt", "numfeecnt"],                root: "data",                id: "numlogid",                totalProperty: "totalCount"                        }),            baseParams: {                flag: 'countbybusi',                datemonth: Ext.util.Format.date(WXTL.Common.dateTime.getNow(), 'Y-m'),                numdepartid: ''            }        });        //    Js.Center.Statistics.ChargeBysvc.Infostore.load({        //        params: {        //            start: 0,        //            limit: _pageSize,        //            flag: 'chargebysvc'        //        }        //    });                //==============================================================列选择模式        var sm = new Ext.grid.CheckboxSelectionModel({            dataIndex: "numlogid"        });        //==============================================================列头        var cm = new Ext.grid.ColumnModel([{            header: "业务名称",            tooltip: "业务名称",            dataIndex: "vc2svcname",            sortable: true        }, {            hidden: true,            header: "运营商",            tooltip: "运营商",            dataIndex: "vc2opername",            sortable: true        }, {            header: "条数",            tooltip: "条数",            dataIndex: "numresp_succnt",            sortable: true        }, {            header: "资费/分",            tooltip: "资费/分",            dataIndex: "vc2feevalue",            sortable: true        }, {            header: "费用/元",            tooltip: "费用/元",            dataIndex: "numfeecnt",            sortable: true        }]);                //==============================================================定义grid        var userGroupGrid = new WXTL.Widgets.CommonGrid.GridPanel({            anchor: '100% 100%',            pageSize: _pageSize,            store: Js.Center.Statistics.ChargeBysvc.Infostore,            needMenu: false,            needRightMenu: false,            sm: sm,            cm: cm        });                        //=============================================================定义formpanel        var selectPanel = new WXTL.Widgets.CommonPanel.QueryFormPanel({            //查询调用的方法            queryMethod: "Js.Center.Statistics.ChargeBysvc.queryGrid",            items: [{                layout: 'form',                defaults: {                    msgTarget: "side"                },                items: [{                    name: 'chargebysvcdatemonth',                    id: "chargebysvcdatemonth",                    hiddenname: "chargebysvcdatemonth",                    fieldLabel: "选择月份",                    xtype: 'monthfield',                    emptyText: Ext.util.Format.date(WXTL.Common.dateTime.getNow(), 'Y-m')                }, {                    xtype: "xComboBox",                    name: "numdepartid",                    fieldLabel: "部门",                    hiddenName: "changebysvcnumdepartid",                    readOnly: true,                    mode: "local",                    displayField: "vc2departname",                    valueField: "numdepartid",                    triggerAction: "all",                    //emptyText: '-=请选择=-',                    store: Js.Center.Common.DepartmentStore                }]            }]        });                //============================================================== 定义查询按钮事件方法        Js.Center.Statistics.ChargeBysvc.queryGrid = function(){            var _datemonth = Ext.get("chargebysvcdatemonth").getValue();            var flag = 'countbybusi';            var numDepartId = Ext.get("changebysvcnumdepartid").getValue();            Js.Center.Statistics.ChargeBysvc.Infostore.baseParams = {                flag: flag,                datemonth: _datemonth,                numdepartid: numDepartId            };            Js.Center.Statistics.ChargeBysvc.Infostore.load({                params: {                    start: 0,                    limit: _pageSize                }            });        };                //============================================================================定义主panel        Js.Center.Statistics.ChargeBysvc.MainPanel = new Ext.Panel({            id: "Js.Center.Statistics.ChargeBysvc.MainPanel",            frame: true, // 渲染面板            bodyBorder: false,            border: false,            autoScroll: true, // 自动显示滚动条            layout: "anchor",            defaults: {                collapsible: true // 允许展开和收缩            },            items: [selectPanel, {                html: '<div style="width:100px;float:right;font-size:14px;vertical-align:text-bottom;text-align:center"><a href=# class="text" onclick=exportData(Js.Center.Statistics.StatisticsMtURL,"flag=loadbybusi&limit=-1&start=0&datemonth="+Ext.get("chargebysvcdatemonth").getValue()+"&numdepartid="+Ext.get("changebysvcnumdepartid").getValue())>数据导出</a></div>',                border: false,                region: 'middle', // 指定子面板所在区域为north                height: 20            }, userGroupGrid]        })    };    //============================================================================绑定到center    GridMain(node, Js.Center.Statistics.ChargeBysvc.MainPanel, "openroomiconinfo", "Js.Center.Statistics.ChargeBysvc.Infostore");};